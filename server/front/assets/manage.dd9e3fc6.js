import{r as u,a as r,A as Ze,g as se,l as He,f as fe,e as j,c as Ie,j as J,d as xe,i as Tn,C as Rn,_ as $e,S as $n,G as Bn,L as zn,aa as Se,a9 as Ee,ax as Kn}from"./index.64257940.js";import{B as ke}from"./button.ca276c4e.js";import{u as en,b as Wn,B as Hn,d as jn,g as Un}from"./iconUtil.71342ca5.js";/* empty css              */import{D as on}from"./index.525ef567.js";import{I as Xe}from"./index.93b57069.js";import"./index.61964446.js";import{M as ln}from"./index.46a9404e.js";/* empty css               *//* empty css               */import{U as qn}from"./index.b17c0477.js";import{L as Gn,R as Xn}from"./RightOutlined.ce6e99f7.js";import{c as Jn,a as Je}from"./conductUtil.91a30912.js";import{K as ge,u as sn,g as cn,f as Qn}from"./Portal.bf2e5144.js";import{o as Yn}from"./omit.173224d8.js";import{F as Zn}from"./context.4fcda71f.js";import{a as ea,g as na}from"./statusUtils.e7207d24.js";import{C as Cn}from"./Collapse.cf21e4eb.js";import{D as un,M as dn}from"./index.e257c064.js";import{P as fn}from"./index.396a50a9.js";import{P as aa}from"./index.2fd29b41.js";import{T as ta}from"./styleChecker.9486324a.js";import{d as Be}from"./dayjs.min.9104a23a.js";import{i as Ce}from"./use-immer.module.72e4ecef.js";import{f as ra}from"./utils.435ff07e.js";import{B as oa}from"./Sider.4bd14ece.js";import"./type.4482a080.js";import"./pickAttrs.91b30b21.js";import"./Overflow.ff04d686.js";import"./SearchOutlined.d2d234c2.js";import"./EyeOutlined.8d71b64e.js";import"./DialogWrap.ed68ac9f.js";import"./useForceUpdate.cd5983fc.js";import"./DeleteOutlined.ab1eeec0.js";import"./_baseIsEqual.ae1f3f6e.js";import"./Dropdown.66094b27.js";var ia={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M862 465.3h-81c-4.6 0-9 2-12.1 5.5L550 723.1V160c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v563.1L255.1 470.8c-3-3.5-7.4-5.5-12.1-5.5h-81c-6.8 0-10.5 8.1-6 13.2L487.9 861a31.96 31.96 0 0048.3 0L868 478.5c4.5-5.2.8-13.2-6-13.2z"}}]},name:"arrow-down",theme:"outlined"};const la=ia;var xn=function(n,a){return r(Ze,{...se(se({},n),{},{ref:a,icon:la})})};xn.displayName="ArrowDownOutlined";const ze=u.exports.forwardRef(xn);var sa={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M868 545.5L536.1 163a31.96 31.96 0 00-48.3 0L156 545.5a7.97 7.97 0 006 13.2h81c4.6 0 9-2 12.1-5.5L474 300.9V864c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V300.9l218.9 252.3c3 3.5 7.4 5.5 12.1 5.5h81c6.8 0 10.5-8 6-13.2z"}}]},name:"arrow-up",theme:"outlined"};const ca=sa;var bn=function(n,a){return r(Ze,{...se(se({},n),{},{ref:a,icon:ca})})};bn.displayName="ArrowUpOutlined";const Ke=u.exports.forwardRef(bn);var ua={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"};const da=ua;var Sn=function(n,a){return r(Ze,{...se(se({},n),{},{ref:a,icon:da})})};Sn.displayName="SyncOutlined";const fa=u.exports.forwardRef(Sn);var Ve=u.exports.createContext(null),nn="__RC_CASCADER_SPLIT__",wn="SHOW_PARENT",yn="SHOW_CHILD";function we(e){return e.join(nn)}function Oe(e){return e.map(we)}function pa(e){return e.split(nn)}function va(e){var n=e||{},a=n.label,o=n.value,l=n.children,i=o||"value";return{label:a||"label",value:i,key:i,children:l||"children"}}function Fe(e,n){var a,o;return(a=e.isLeaf)!==null&&a!==void 0?a:!(!((o=e[n.children])===null||o===void 0)&&o.length)}function ma(e){var n=e.parentElement;if(!!n){var a=e.offsetTop-n.offsetTop;a-n.scrollTop<0?n.scrollTo({top:a}):a+e.offsetHeight-n.scrollTop>n.offsetHeight&&n.scrollTo({top:a+e.offsetHeight-n.offsetHeight})}}function pn(e,n,a){var o=new Set(e),l=n();return e.filter(function(i){var f=l[i],c=f?f.parent:null,m=f?f.children:null;return a===yn?!(m&&m.some(function(p){return p.key&&o.has(p.key)})):!(c&&!c.node.disabled&&o.has(c.key))})}function Le(e,n,a){for(var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,l=n,i=[],f=function(p){var E,b,F,t=e[p],x=(E=l)===null||E===void 0?void 0:E.findIndex(function(y){var D=y[a.value];return o?String(D)===String(t):D===t}),h=x!==-1?(b=l)===null||b===void 0?void 0:b[x]:null;i.push({value:(F=h==null?void 0:h[a.value])!==null&&F!==void 0?F:t,index:x,option:h}),l=h==null?void 0:h[a.children]},c=0;c<e.length;c+=1)f(c);return i}const ha=function(e,n,a,o,l){return u.exports.useMemo(function(){var i=l||function(f){var c=o?f.slice(-1):f,m=" / ";return c.every(function(p){return["string","number"].includes(He(p))})?c.join(m):c.reduce(function(p,E,b){var F=u.exports.isValidElement(E)?u.exports.cloneElement(E,{key:b}):E;return b===0?[F]:[].concat(fe(p),[m,F])},[])};return e.map(function(f){var c,m,p=Le(f,n,a),E=i(p.map(function(F){var t,x=F.option,h=F.value;return(t=x==null?void 0:x[a.label])!==null&&t!==void 0?t:h}),p.map(function(F){var t=F.option;return t})),b=we(f);return{label:E,value:b,key:b,valueCells:f,disabled:(c=p[p.length-1])===null||c===void 0||(m=c.option)===null||m===void 0?void 0:m.disabled}})},[e,n,a,l,o])},ga=function(e,n){var a=u.exports.useRef({options:null,info:null}),o=u.exports.useCallback(function(){return a.current.options!==e&&(a.current.options=e,a.current.info=Jn(e,{fieldNames:n,initWrapper:function(i){return se(se({},i),{},{pathKeyEntities:{}})},processEntity:function(i,f){var c=i.nodes.map(function(m){return m[n.value]}).join(nn);f.pathKeyEntities[c]=i,i.key=c}})),a.current.info.pathKeyEntities},[n,e]);return o},Ca=function(e,n){return u.exports.useCallback(function(a){var o=[],l=[];return a.forEach(function(i){var f=Le(i,e,n);f.every(function(c){return c.option})?l.push(i):o.push(i)}),[l,o]},[e,n])};function vn(e){var n=u.exports.useRef();n.current=e;var a=u.exports.useCallback(function(){return n.current.apply(n,arguments)},[]);return a}function xa(e){return u.exports.useMemo(function(){if(!e)return[!1,{}];var n={matchInputWidth:!0,limit:50};return e&&He(e)==="object"&&(n=se(se({},n),e)),n.limit<=0&&delete n.limit,[!0,n]},[e])}var Ae="__rc_cascader_search_mark__",ba=function(n,a,o){var l=o.label;return a.some(function(i){return String(i[l]).toLowerCase().includes(n.toLowerCase())})},Sa=function(n,a,o,l){return a.map(function(i){return i[l.label]}).join(" / ")};const wa=function(e,n,a,o,l,i){var f=l.filter,c=f===void 0?ba:f,m=l.render,p=m===void 0?Sa:m,E=l.limit,b=E===void 0?50:E,F=l.sort;return u.exports.useMemo(function(){var t=[];if(!e)return[];function x(h,y){h.forEach(function(D){if(!(!F&&b>0&&t.length>=b)){var W=[].concat(fe(y),[D]),k=D[a.children];if((!k||k.length===0||i)&&c(e,W,{label:a.label})){var M;t.push(se(se({},D),{},(M={},j(M,a.label,p(e,W,o,a)),j(M,Ae,W),M)))}k&&x(D[a.children],W)}})}return x(n,[]),F&&t.sort(function(h,y){return F(h[Ae],y[Ae],e,a)}),b>0?t.slice(0,b):t},[e,n,a,o,p,i,c,F,b])};function ya(e){var n,a=e.prefixCls,o=e.checked,l=e.halfChecked,i=e.disabled,f=e.onClick,c=u.exports.useContext(Ve),m=c.checkable,p=typeof m!="boolean"?m:null;return r("span",{className:Ie("".concat(a),(n={},j(n,"".concat(a,"-checked"),o),j(n,"".concat(a,"-indeterminate"),!o&&l),j(n,"".concat(a,"-disabled"),i),n)),onClick:f,children:p})}var kn="__cascader_fix_label__";function ka(e){var n=e.prefixCls,a=e.multiple,o=e.options,l=e.activeValue,i=e.prevValuePath,f=e.onToggleOpen,c=e.onSelect,m=e.onActive,p=e.checkedSet,E=e.halfCheckedSet,b=e.loadingKeys,F=e.isSelectable,t="".concat(n,"-menu"),x="".concat(n,"-menu-item"),h=u.exports.useContext(Ve),y=h.fieldNames,D=h.changeOnSelect,W=h.expandTrigger,k=h.expandIcon,M=h.loadingIcon,$=h.dropdownMenuColumnStyle,_=W==="hover",T=u.exports.useMemo(function(){return o.map(function(v){var O,P=v.disabled,L=v[Ae],Q=(O=v[kn])!==null&&O!==void 0?O:v[y.label],N=v[y.value],U=Fe(v,y),le=L?L.map(function(z){return z[y.value]}):[].concat(fe(i),[N]),H=we(le),B=b.includes(H),Y=p.has(H),re=E.has(H);return{disabled:P,label:Q,value:N,isLeaf:U,isLoading:B,checked:Y,halfChecked:re,option:v,fullPath:le,fullPathKey:H}})},[o,p,y,E,b,i]);return r("ul",{className:t,role:"menu",children:T.map(function(v){var O,P=v.disabled,L=v.label,Q=v.value,N=v.isLeaf,U=v.isLoading,le=v.checked,H=v.halfChecked,B=v.option,Y=v.fullPath,re=v.fullPathKey,z=function(){!P&&(!_||!N)&&m(Y)},ce=function(){F(B)&&c(Y,N)},q;return typeof B.title=="string"?q=B.title:typeof L=="string"&&(q=L),J("li",{className:Ie(x,(O={},j(O,"".concat(x,"-expand"),!N),j(O,"".concat(x,"-active"),l===Q),j(O,"".concat(x,"-disabled"),P),j(O,"".concat(x,"-loading"),U),O)),style:$,role:"menuitemcheckbox",title:q,"aria-checked":le,"data-path-key":re,onClick:function(){z(),(!a||N)&&ce()},onDoubleClick:function(){D&&f(!1)},onMouseEnter:function(){_&&z()},onMouseDown:function(s){s.preventDefault()},children:[a&&r(ya,{prefixCls:"".concat(n,"-checkbox"),checked:le,halfChecked:H,disabled:P,onClick:function(s){s.stopPropagation(),ce()}}),r("div",{className:"".concat(x,"-content"),children:L}),!U&&k&&!N&&r("div",{className:"".concat(x,"-expand-icon"),children:k}),U&&M&&r("div",{className:"".concat(x,"-loading-icon"),children:M})]},re)})})}const _a=function(){var e=en(),n=e.multiple,a=e.open,o=u.exports.useContext(Ve),l=o.values,i=u.exports.useState([]),f=xe(i,2),c=f[0],m=f[1];return u.exports.useEffect(function(){if(a&&!n){var p=l[0];m(p||[])}},[a]),[c,m]},Oa=function(e,n,a,o,l,i){var f=en(),c=f.direction,m=f.searchValue,p=f.toggleOpen,E=f.open,b=c==="rtl",F=u.exports.useMemo(function(){for(var $=-1,_=n,T=[],v=[],O=o.length,P=function(H){var B=_.findIndex(function(Y){return Y[a.value]===o[H]});if(B===-1)return"break";$=B,T.push($),v.push(o[H]),_=_[$][a.children]},L=0;L<O&&_;L+=1){var Q=P(L);if(Q==="break")break}for(var N=n,U=0;U<T.length-1;U+=1)N=N[T[U]][a.children];return[v,$,N]},[o,a,n]),t=xe(F,3),x=t[0],h=t[1],y=t[2],D=function(_){l(_)},W=function(_){var T=y.length,v=h;v===-1&&_<0&&(v=T);for(var O=0;O<T;O+=1){v=(v+_+T)%T;var P=y[v];if(P&&!P.disabled){var L=P[a.value],Q=x.slice(0,-1).concat(L);D(Q);return}}},k=function(){if(x.length>1){var _=x.slice(0,-1);D(_)}else p(!1)},M=function(){var _,T=((_=y[h])===null||_===void 0?void 0:_[a.children])||[],v=T.find(function(P){return!P.disabled});if(v){var O=[].concat(fe(x),[v[a.value]]);D(O)}};u.exports.useImperativeHandle(e,function(){return{onKeyDown:function(_){var T=_.which;switch(T){case ge.UP:case ge.DOWN:{var v=0;T===ge.UP?v=-1:T===ge.DOWN&&(v=1),v!==0&&W(v);break}case ge.LEFT:{b?M():k();break}case ge.RIGHT:{b?k():M();break}case ge.BACKSPACE:{m||k();break}case ge.ENTER:{if(x.length){var O=y[h],P=(O==null?void 0:O[Ae])||[];P.length?i(P.map(function(L){return L[a.value]}),P[P.length-1]):i(x,y[h])}break}case ge.ESC:p(!1),E&&_.stopPropagation()}},onKeyUp:function(){}}})};var Da=u.exports.forwardRef(function(e,n){var a,o,l,i,f=en(),c=f.prefixCls,m=f.multiple,p=f.searchValue,E=f.toggleOpen,b=f.notFoundContent,F=f.direction,t=u.exports.useRef(),x=F==="rtl",h=u.exports.useContext(Ve),y=h.options,D=h.values,W=h.halfValues,k=h.fieldNames,M=h.changeOnSelect,$=h.onSelect,_=h.searchOptions,T=h.dropdownPrefixCls,v=h.loadData,O=h.expandTrigger,P=T||c,L=u.exports.useState([]),Q=xe(L,2),N=Q[0],U=Q[1],le=function(S){if(!(!v||p)){var K=Le(S,y,k),V=K.map(function(X){var ne=X.option;return ne}),G=V[V.length-1];if(G&&!Fe(G,k)){var w=we(S);U(function(X){return[].concat(fe(X),[w])}),v(V)}}};u.exports.useEffect(function(){N.length&&N.forEach(function(I){var S=pa(I),K=Le(S,y,k,!0).map(function(G){var w=G.option;return w}),V=K[K.length-1];(!V||V[k.children]||Fe(V,k))&&U(function(G){return G.filter(function(w){return w!==I})})})},[y,N,k]);var H=u.exports.useMemo(function(){return new Set(Oe(D))},[D]),B=u.exports.useMemo(function(){return new Set(Oe(W))},[W]),Y=_a(),re=xe(Y,2),z=re[0],ce=re[1],q=function(S){ce(S),le(S)},ee=function(S){var K=S.disabled,V=Fe(S,k);return!K&&(V||M||m)},s=function(S,K){var V=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;$(S),!m&&(K||M&&(O==="hover"||V))&&E(!1)},d=u.exports.useMemo(function(){return p?_:y},[p,_,y]),g=u.exports.useMemo(function(){for(var I=[{options:d}],S=d,K=function(X){var ne=z[X],be=S.find(function(pe){return pe[k.value]===ne}),me=be==null?void 0:be[k.children];if(!(me!=null&&me.length))return"break";S=me,I.push({options:me})},V=0;V<z.length;V+=1){var G=K(V);if(G==="break")break}return I},[d,z,k]),C=function(S,K){ee(K)&&s(S,Fe(K,k),!0)};Oa(n,d,k,z,q,C),u.exports.useEffect(function(){for(var I=0;I<z.length;I+=1){var S,K=z.slice(0,I+1),V=we(K),G=(S=t.current)===null||S===void 0?void 0:S.querySelector('li[data-path-key="'.concat(V.replace(/\\{0,2}"/g,'\\"'),'"]'));G&&ma(G)}},[z]);var A=!(!((a=g[0])===null||a===void 0||(o=a.options)===null||o===void 0)&&o.length),Z=[(l={},j(l,k.value,"__EMPTY__"),j(l,kn,b),j(l,"disabled",!0),l)],oe=se(se({},e),{},{multiple:!A&&m,onSelect:s,onActive:q,onToggleOpen:E,checkedSet:H,halfCheckedSet:B,loadingKeys:N,isSelectable:ee}),ue=A?[{options:Z}]:g,ie=ue.map(function(I,S){var K=z.slice(0,S),V=z[S];return r(ka,{...oe,prefixCls:P,options:I.options,prevValuePath:K,activeValue:V},S)});return r("div",{className:Ie("".concat(P,"-menus"),(i={},j(i,"".concat(P,"-menu-empty"),A),j(i,"".concat(P,"-rtl"),x),i)),ref:t,children:ie})}),Pa=["id","prefixCls","fieldNames","defaultValue","value","changeOnSelect","onChange","displayRender","checkable","searchValue","onSearch","showSearch","expandTrigger","options","dropdownPrefixCls","loadData","popupVisible","open","popupClassName","dropdownClassName","dropdownMenuColumnStyle","popupPlacement","placement","onDropdownVisibleChange","onPopupVisibleChange","expandIcon","loadingIcon","children","dropdownMatchSelectWidth","showCheckedStrategy"];function Na(e){return Array.isArray(e)&&Array.isArray(e[0])}function mn(e){return e?Na(e)?e:(e.length===0?[]:[e]).map(function(n){return Array.isArray(n)?n:[n]}):[]}var Me=u.exports.forwardRef(function(e,n){var a=e.id,o=e.prefixCls,l=o===void 0?"rc-cascader":o,i=e.fieldNames,f=e.defaultValue,c=e.value,m=e.changeOnSelect,p=e.onChange,E=e.displayRender,b=e.checkable,F=e.searchValue,t=e.onSearch,x=e.showSearch,h=e.expandTrigger,y=e.options,D=e.dropdownPrefixCls,W=e.loadData,k=e.popupVisible,M=e.open,$=e.popupClassName,_=e.dropdownClassName,T=e.dropdownMenuColumnStyle,v=e.popupPlacement,O=e.placement,P=e.onDropdownVisibleChange,L=e.onPopupVisibleChange,Q=e.expandIcon,N=Q===void 0?">":Q,U=e.loadingIcon,le=e.children,H=e.dropdownMatchSelectWidth,B=H===void 0?!1:H,Y=e.showCheckedStrategy,re=Y===void 0?wn:Y,z=Tn(e,Pa),ce=Wn(a),q=!!b,ee=sn(f,{value:c,postState:mn}),s=xe(ee,2),d=s[0],g=s[1],C=u.exports.useMemo(function(){return va(i)},[JSON.stringify(i)]),A=u.exports.useMemo(function(){return y||[]},[y]),Z=ga(A,C),oe=u.exports.useCallback(function(ae){var R=Z();return ae.map(function(te){var ve=R[te].nodes;return ve.map(function(he){return he[C.value]})})},[Z,C]),ue=sn("",{value:F,postState:function(R){return R||""}}),ie=xe(ue,2),I=ie[0],S=ie[1],K=function(R,te){S(R),te.source!=="blur"&&t&&t(R)},V=xa(x),G=xe(V,2),w=G[0],X=G[1],ne=wa(I,A,C,D||l,X,m),be=Ca(A,C),me=u.exports.useMemo(function(){var ae=be(d),R=xe(ae,2),te=R[0],ve=R[1];if(!q||!d.length)return[te,[],ve];var he=Oe(te),Pe=Z(),ye=Je(he,!0,Pe),Te=ye.checkedKeys,Re=ye.halfCheckedKeys;return[oe(Te),oe(Re),ve]},[q,d,Z,oe,be]),pe=xe(me,3),_e=pe[0],je=pe[1],De=pe[2],_n=u.exports.useMemo(function(){var ae=Oe(_e),R=pn(ae,Z,re);return[].concat(fe(De),fe(oe(R)))},[_e,Z,oe,De,re]),On=ha(_n,A,C,q,E),Ue=vn(function(ae){if(g(ae),p){var R=mn(ae),te=R.map(function(Pe){return Le(Pe,A,C).map(function(ye){return ye.option})}),ve=q?R:R[0],he=q?te:te[0];p(ve,he)}}),qe=vn(function(ae){if(S(""),!q)Ue(ae);else{var R=we(ae),te=Oe(_e),ve=Oe(je),he=te.includes(R),Pe=De.some(function(Ne){return we(Ne)===R}),ye=_e,Te=De;if(Pe&&!he)Te=De.filter(function(Ne){return we(Ne)!==R});else{var Re=he?te.filter(function(Ne){return Ne!==R}):[].concat(fe(te),[R]),rn=Z(),Ge;if(he){var Ln=Je(Re,{checked:!1,halfCheckedKeys:ve},rn);Ge=Ln.checkedKeys}else{var Vn=Je(Re,!0,rn);Ge=Vn.checkedKeys}var Mn=pn(Ge,Z,re);ye=oe(Mn)}Ue([].concat(fe(Te),fe(ye)))}}),Dn=function(R,te){if(te.type==="clear"){Ue([]);return}var ve=te.values[0].valueCells;qe(ve)},Pn=M!==void 0?M:k,Nn=_||$,En=O||v,Fn=function(R){P==null||P(R),L==null||L(R)},An=u.exports.useMemo(function(){return{options:A,fieldNames:C,values:_e,halfValues:je,changeOnSelect:m,onSelect:qe,checkable:b,searchOptions:ne,dropdownPrefixCls:D,loadData:W,expandTrigger:h,expandIcon:N,loadingIcon:U,dropdownMenuColumnStyle:T}},[A,C,_e,je,m,qe,b,ne,D,W,h,N,U,T]),tn=!(I?ne:A).length,In=I&&X.matchInputWidth||tn?{}:{minWidth:"auto"};return r(Ve.Provider,{value:An,children:r(Hn,{...z,ref:n,id:ce,prefixCls:l,dropdownMatchSelectWidth:B,dropdownStyle:In,displayValues:On,onDisplayValuesChange:Dn,mode:q?"multiple":void 0,searchValue:I,onSearch:K,showSearch:w,OptionList:Da,emptyOptions:tn,open:Pn,dropdownClassName:Nn,placement:En,onDropdownVisibleChange:Fn,getRawInputElement:function(){return le}})})});Me.SHOW_PARENT=wn;Me.SHOW_CHILD=yn;var Ea=globalThis&&globalThis.__rest||function(e,n){var a={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(a[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(e);l<o.length;l++)n.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(e,o[l])&&(a[o[l]]=e[o[l]]);return a},Fa=Me.SHOW_CHILD,Aa=Me.SHOW_PARENT;function Ia(e,n,a){var o=e.toLowerCase().split(n).reduce(function(f,c,m){return m===0?[c]:[].concat(fe(f),[n,c])},[]),l=[],i=0;return o.forEach(function(f,c){var m=i+f.length,p=e.slice(i,m);i=m,c%2===1&&(p=r("span",{className:"".concat(a,"-menu-item-keyword"),children:p},"seperator-".concat(c))),l.push(p)}),l}var La=function(n,a,o,l){var i=[],f=n.toLowerCase();return a.forEach(function(c,m){m!==0&&i.push(" / ");var p=c[l.label],E=He(p);(E==="string"||E==="number")&&(p=Ia(String(p),f,o)),i.push(p)}),i},an=u.exports.forwardRef(function(e,n){var a,o=e.prefixCls,l=e.size,i=e.disabled,f=e.className,c=e.multiple,m=e.bordered,p=m===void 0?!0:m,E=e.transitionName,b=e.choiceTransitionName,F=b===void 0?"":b,t=e.popupClassName,x=e.dropdownClassName,h=e.expandIcon,y=e.placement,D=e.showSearch,W=e.allowClear,k=W===void 0?!0:W,M=e.notFoundContent,$=e.direction,_=e.getPopupContainer,T=e.status,v=e.showArrow,O=Ea(e,["prefixCls","size","disabled","className","multiple","bordered","transitionName","choiceTransitionName","popupClassName","dropdownClassName","expandIcon","placement","showSearch","allowClear","notFoundContent","direction","getPopupContainer","status","showArrow"]),P=Yn(O,["suffixIcon"]),L=u.exports.useContext(Rn),Q=L.getPopupContainer,N=L.getPrefixCls,U=L.renderEmpty,le=L.direction,H=$||le,B=H==="rtl",Y=u.exports.useContext(Zn),re=Y.status,z=Y.hasFeedback,ce=Y.isFormItemInput,q=Y.feedbackIcon,ee=ea(re,T),s=M||(U||jn)("Cascader"),d=N(),g=N("select",o),C=N("cascader",o),A=Ie(t||x,"".concat(C,"-dropdown"),j({},"".concat(C,"-dropdown-rtl"),H==="rtl")),Z=u.exports.useMemo(function(){if(!D)return D;var pe={render:La};return He(D)==="object"&&(pe=$e($e({},pe),D)),pe},[D]),oe=u.exports.useContext($n),ue=l||oe,ie=u.exports.useContext(Bn),I=i||ie,S=h;h||(S=B?r(Gn,{}):r(Xn,{}));var K=r("span",{className:"".concat(g,"-menu-item-loading-icon"),children:r(zn,{spin:!0})}),V=u.exports.useMemo(function(){return c?r("span",{className:"".concat(C,"-checkbox-inner")}):!1},[c]),G=v!==void 0?v:e.loading||!c,w=Un($e($e({},e),{hasFeedback:z,feedbackIcon:q,showArrow:G,multiple:c,prefixCls:g})),X=w.suffixIcon,ne=w.removeIcon,be=w.clearIcon,me=function(){return y!==void 0?y:$==="rtl"?"bottomRight":"bottomLeft"};return r(Me,{prefixCls:g,className:Ie(!o&&C,(a={},j(a,"".concat(g,"-lg"),ue==="large"),j(a,"".concat(g,"-sm"),ue==="small"),j(a,"".concat(g,"-rtl"),B),j(a,"".concat(g,"-borderless"),!p),j(a,"".concat(g,"-in-form-item"),ce),a),na(g,ee,z),f),disabled:I,...P,direction:H,placement:me(),notFoundContent:s,allowClear:k,showSearch:Z,expandIcon:S,inputIcon:X,removeIcon:ne,clearIcon:be,loadingIcon:K,checkable:V,dropdownClassName:A,dropdownPrefixCls:o||C,choiceTransitionName:cn(d,"",F),transitionName:cn(d,Qn(y),E),getPopupContainer:_||Q,ref:n,showArrow:z||v})});an.SHOW_PARENT=Aa;an.SHOW_CHILD=Fa;const Va=an,Ma="/assets/icon-compress.13fdfaa3.svg",Ta="/assets/icon-doc.2d1327be.svg",Qe="/assets/icon-fold.f1c27fac.svg",Ra="/assets/icon-other.14c73ad1.svg",$a="/assets/icon-pic.5e3b961a.svg",Ba="/assets/icon-video.e242656f.svg",za="_container_1o4fb_1",Ka="_cascadeContainer_1o4fb_11",Wa="_fileDetail_1o4fb_22",Ha="_ellipsis_1o4fb_97",ja="_fileDetailBody_1o4fb_109",Ua="_header_1o4fb_114",qa="_collapse_1o4fb_122",Ga="_bread_1o4fb_141",Xa="_leafBread_1o4fb_142",de={container:za,cascadeContainer:Ka,fileDetail:Wa,"casader-select":"_casader-select_1o4fb_38",ellipsis:Ha,fileDetailBody:ja,header:Ua,collapse:qa,bread:Ga,leafBread:Xa},hn={compress:new Set(["zip","rar","7z","tar","gz","bz2","xz","lz","lzma","zst","cab"]),pic:new Set(["jpg","jpeg","png","gif","bmp","webp","svg","ico","tiff","psd","raw","heif","indd","ai","eps","svgz","ai","eps","ps"]),video:new Set(["mp4","avi","rmvb","rm","flv","mkv","mov","wmv","mpg","mpeg","3gp","webm","ts","m3u8","f4v","f4p","f4a","f4b","m4v","m4a","m4b","m4r","m4p","m4u"]),doc:new Set(["doc","docx","xls","xlsx","ppt","pptx","pdf","txt","md","csv","html","htm","xml","json","log","sql"])},{Panel:gn}=Cn;function Ja(e,n){return(e.isDir?1:2)-(n.isDir?1:2)}function We(e){var o,l,i;const n=((l=(o=e.split("."))==null?void 0:o.pop())==null?void 0:l.toLowerCase())||"";return(i=Object.keys(hn).find(f=>{if(hn[f].has(n))return!0}))!=null?i:"other"}const Ye={pic:$a,video:Ba,doc:Ta,compress:Ma,other:Ra};function Qa({bucketId:e}){var z,ce,q,ee;const[n,a]=Ce(!0),[o,l]=Ce(!1),[i,f]=Ce("name"),[c,m]=Ce(!0),[p,E]=Ce(""),[b,F]=Ce(null),[t,x]=Ce(void 0),[h,y]=Ce([]),[D,W]=Ce(!1),k=u.exports.useRef(null),M=u.exports.useRef(),$=u.exports.useMemo(()=>{var s,d,g;return t!=null&&t.isLeaf?(d=(s=t.parent)==null?void 0:s.name)!=null?d:"":(g=t==null?void 0:t.name)!=null?g:""},[t]),_=u.exports.useRef(!1);u.exports.useEffect(()=>{x(void 0),l(!1),_.current=!1,N(p,{forceRoot:!0}).then(()=>{_.current=!0})},[e,p]),u.exports.useEffect(()=>{!_.current||T()},[D]),u.exports.useEffect(()=>{F(s=>{const d=[s];for(;d.length;){const g=d.pop();!g||(Q(g),g.forEach(C=>{var A;(A=C==null?void 0:C.children)!=null&&A.length&&d.push(C.children)}))}})},[c,i]);const T=(s=!1)=>{var g;const d=s?t:t==null?void 0:t.parent;N((g=d==null?void 0:d.name)!=null?g:p)},v=()=>{a(!n)},O=s=>{s===i?m(!c):(f(s),m(!0))},P=r(dn,{items:[{key:"0",label:J("div",{onClick:()=>O("name"),children:["\u6309\u540D\u79F0",i==="name"&&r("span",{className:"ml-2 text-red-500",children:c?r(Ke,{}):r(ze,{})})]})},{key:"1",label:J("div",{onClick:()=>O("size"),children:["\u6309\u6587\u4EF6\u5927\u5C0F",i==="size"&&r("span",{className:"ml-2 text-red-500",children:c?r(Ke,{}):r(ze,{})})]})},{key:"2",label:J("div",{onClick:()=>O("createTime"),children:["\u6309\u521B\u5EFA\u65F6\u95F4",i==="createTime"&&r("span",{className:"ml-2 text-red-500",children:c?r(Ke,{}):r(ze,{})})]})},{key:"3",label:J("div",{onClick:()=>O("updateTime"),children:["\u6309\u4FEE\u6539\u65F6\u95F4",i==="updateTime"&&r("span",{className:"ml-2 text-red-500",children:c?r(Ke,{}):r(ze,{})})]})}]}),L=(s,d)=>{y(d.map(C=>{var A;return{value:C.isLeaf?C.value:((A=C.name)!=null?A:"").replace(/\/$/,""),isLeaf:!!C.isLeaf}}));const g=d[d.length-1];x({...g}),l(!0)},Q=s=>{s.sort((d,g)=>{var A,Z;let C;return i==="name"?C=d.value.localeCompare(g.value):i==="size"?C=((A=d==null?void 0:d.size)!=null?A:0)-((Z=g==null?void 0:g.size)!=null?Z:0):i==="createTime"?C=Be(d.createTime).valueOf()-Be(g.createTime).valueOf():C=Be(d.updateTime).valueOf()-Be(g.updateTime).valueOf(),c?C:-C})},N=async(s,{forceRoot:d=!1}={})=>{var C,A,Z;if(console.log("loadMenu",s),!e)return;const g=Se.loading("\u52A0\u8F7D\u4E2D",0);try{const oe=w=>{if(!w.children)return;const X=w.children.find(ne=>ne.name&&s.startsWith(ne.name));if(X){if(s===X.name)return X;if(X.children)return oe(X)}},ue={label:"",name:p,value:"",children:b};let ie=!d&&oe(ue);ie||(ie=ue);const I=(C=ie==null?void 0:ie.name)!=null?C:"",S=await Ee.get("/s3Upload/list",{params:{bucketID:e,filePrefix:I?`${I}`:void 0},resolveErrorMsg:w=>"\u6587\u4EF6\u5217\u8868\u52A0\u8F7D\u5931\u8D25"}),K=new Map((Z=(A=ie.children)==null?void 0:A.map(w=>[w.name,w]))!=null?Z:[]),V=I.replace(/[^/]*$/,""),G=S.sort(Ja).filter(w=>w.name!==I).map(w=>{var X;return{children:(X=K.get(w.name))==null?void 0:X.children,parent:ie,label:r(un,{trigger:["contextMenu"],overlay:r(dn,{items:[{key:"rename",label:"\u91CD\u547D\u540D",onClick:ne=>{ne.domEvent.stopPropagation(),le(w.name)}},{key:"delete",label:r(fn,{title:"\u786E\u5B9A\u5220\u9664\u5417?",onConfirm:()=>H(w),okText:"\u5220\u9664",cancelText:"\u53D6\u6D88",children:"\u5220\u9664"}),onClick:ne=>{ne.domEvent.stopPropagation()}}]}),children:J("div",{className:"flex",children:[r("span",{children:w.isDir?r("img",{src:Qe,alt:"\u6587\u4EF6\u5939",className:"w-3.5 h-3.5"}):r("img",{src:Ye[We(w.name)],alt:"\u56FE\u7247",className:"w-3.5 h-3.5"})}),r(aa,{content:r("div",{className:"max-w-[50vw] overflow-clip break-all",children:w.name.replace(V,"")}),placement:"topLeft",children:r("span",{className:`ml-2.5 ${de.ellipsis} ${w.isDir?"isDir":"isLeaf"}`,children:w.name.replace(V,"")})})]})}),value:w.name.replace(V,""),isLeaf:!w.isDir,...w}});Q(G),console.log(ue),ie.children=G,F([...ue.children])}catch(oe){console.error(oe)}finally{g()}},U=async s=>{var g;const d=(g=s[s.length-1].name)!=null?g:"";await N(d)},le=s=>{B.current="",ln.info({title:"\u8BF7\u8F93\u5165\u540D\u79F0",content:r(Xe,{autoFocus:!0,placeholder:"\u8BF7\u8F93\u5165",onChange:d=>{B.current=d.target.value}}),okText:"\u786E\u5B9A",onOk:()=>{if(!B.current)return;const d=Se.loading("\u4FDD\u5B58\u4E2D");Ee.post("/s3Upload/rename",{bucketID:e,oldName:s,newName:s.replace(/[^/]*(?=$|\/$)/,B.current)}).then(()=>{d(),l(!1),Se.success("\u4FDD\u5B58\u6210\u529F"),W(!D)})}})},H=(s=t)=>{const d=Se.loading("\u5220\u9664\u4E2D");Ee.post("/s3Upload/remove",{bucketID:e,fileName:s==null?void 0:s.name}).then(()=>{d(),l(!1),Se.success("\u5220\u9664\u6210\u529F"),W(!D)})},B=u.exports.useRef(),Y=()=>{let s=$;B.current="",ln.info({title:"\u8BF7\u8F93\u5165\u6587\u4EF6\u5939\u540D\u79F0",content:r(Xe,{autoFocus:!0,placeholder:"\u8BF7\u8F93\u5165",onChange:d=>{B.current=d.target.value}}),okText:"\u521B\u5EFA",onOk:()=>{if(!B.current)return;const d=Se.loading("\u521B\u5EFA\u4E2D");Ee.post("/s3Upload/createDir",{bucketID:e,path:`${s}${B.current}/`}).then(()=>{d(),l(!1),Se.success("\u521B\u5EFA\u6210\u529F"),N($)})}})},re=s=>{var g,C,A;if(!s)return null;const d=We((g=s==null?void 0:s.name)!=null?g:"");return s.isDir?r("img",{width:200,height:200,src:Qe,alt:"\u6587\u4EF6\u5939"}):d==="pic"?r("img",{width:200,height:200,src:(C=t==null?void 0:t.url)!=null?C:"",alt:t==null?void 0:t.value}):d==="video"?r("video",{controls:!0,width:200,height:200,src:(A=t==null?void 0:t.url)!=null?A:""}):r("img",{src:Ye[We(t==null?void 0:t.value)],width:200,height:200,alt:t==null?void 0:t.value})};return J("div",{className:"h-full flex flex-col",children:[J("div",{className:"bg-white pl-9 h-13 pr-4 flex  items-center justify-between flex-0",style:{borderBottom:"1px solid rgba(95,98,105,0.1)"},children:[r("div",{className:"flex flex-1 min-w-0",children:h.map((s,d)=>r("div",{className:s.isLeaf?de.leafBread:de.bread,children:s.value},s.value))}),J("div",{className:"flex flex-0 justify-center items-center",children:[n?r(ta,{title:"serach",children:r("div",{className:"mr-4 cursor-pointer",onClick:v,children:r("img",{alt:"",src:"/assets/search.svg"})})}):r(Xe,{onPressEnter:s=>E(s.currentTarget.value),autoFocus:!0,status:"error",prefix:r("div",{className:"cursor-pointer",onClick:v,children:r("img",{alt:"",src:"/assets/search.svg"})}),className:"mr-4"}),r(on,{type:"vertical",className:"!h-3 !mr-5"}),r(ke,{onClick:()=>W(!D),icon:r(fa,{}),className:"mr-2 !p-1 !border-0",children:"\u5237\u65B0"}),r(un,{overlay:P,placement:"bottom",children:r(ke,{icon:r(oa,{}),className:"mr-2 !p-1 !border-0",children:"\u6392\u5E8F"})}),r(on,{type:"vertical",className:"!h-3 !mr-5"}),r(qn,{action:"/api/v1/s3Upload/upload",data:{bucketID:e,path:$},showUploadList:!1,onChange:s=>{var d;s.file.status==="success"||s.file.status==="done"?((d=M.current)==null||d.call(M),M.current=void 0,N($)):M.current||(M.current=Se.loading("\u4E0A\u4F20\u4E2D..."))},children:r(ke,{size:"small",className:"!h-7 !rounded-2px mr-4",children:"\u4E0A\u4F20"})}),r(ke,{size:"small",className:"!h-7 !rounded-2px",onClick:Y,children:"\u6587\u4EF6\u5939"})]})]}),k.current?r(Va,{getPopupContainer:()=>k.current,open:!0,options:b,loadData:s=>void U(s),onChange:L,changeOnSelect:!0,popupClassName:`${de["casader-select"]} flex mb-8`,children:r("div",{})}):null,J("div",{className:de.container,style:{border:"1px solid rgba(95,98,105,0.1)",borderBottom:"none",borderRadius:"4px 4px 0 0"},children:[r("div",{ref:k,className:de.cascadeContainer}),o?r("div",{className:de.fileDetail,children:J("div",{className:de.fileDetailBody,children:[J("div",{className:de.header,children:[t!=null&&t.isLeaf?r("img",{src:Ye[We((z=t==null?void 0:t.name)!=null?z:"")],alt:"\u56FE\u7247",className:"w-3.5 h-3.5 mr-2"}):r("img",{src:Qe,alt:"\u6587\u4EF6\u5939",className:"w-3.5 h-3.5 mr-2"}),t==null?void 0:t.name]}),J(Cn,{defaultActiveKey:["1","2"],bordered:!1,expandIconPosition:"end",ghost:!0,className:de.collapse,children:[J(gn,{header:"\u57FA\u672C\u4FE1\u606F",children:[J("p",{children:["\u7C7B\u578B\uFF1A",(ce=t==null?void 0:t.mime)!=null?ce:"\u672A\u77E5"]}),J("p",{children:["\u5927\u5C0F\uFF1A",ra(t==null?void 0:t.size)]}),J("p",{children:["\u521B\u5EFA\u4E8E\uFF1A",(q=t==null?void 0:t.createTime)!=null?q:""]}),J("p",{children:["\u4FEE\u6539\u4E8E\uFF1A",(ee=t==null?void 0:t.updateTime)!=null?ee:""]})]},"1"),r(gn,{header:"\u9884\u89C8",children:r("div",{className:`${de["panel-style"]} flex-col justify-center items-center flex`,children:re(t)})},"2"),J("div",{className:"flex flex-col",children:[r("a",{className:"flex",href:t==null?void 0:t.url,download:t==null?void 0:t.value,children:r(ke,{className:"m-1.5 flex-1 !border-[#efeff0] rounded-4px",children:"\u4E0B\u8F7D"})}),r(ke,{onClick:()=>{var s;return void navigator.clipboard.writeText(`${(s=t==null?void 0:t.name)!=null?s:""}`)},className:"m-1.5 !border-[#efeff0] rounded-4px",children:"\u590D\u5236URL"}),r(fn,{title:"\u786E\u5B9A\u5220\u9664\u5417?",onConfirm:H,okText:"\u5220\u9664",cancelText:"\u53D6\u6D88",children:r(ke,{className:"m-1.5 !border-[#efeff0] rounded-4px",children:r("span",{className:"text-[#F21212]",children:"\u5220\u9664"})})})]})]})]})}):null]})]})}function Lt(){const{id:e}=Kn(),[n,a]=u.exports.useState();return u.exports.useEffect(()=>{Ee.get("/storageBucket").then(o=>{var l;a((l=o==null?void 0:o.filter(i=>i.id===Number(e)))==null?void 0:l[0])})},[e]),r("div",{className:"h-full",children:r(Qa,{bucketId:n==null?void 0:n.id},n==null?void 0:n.id)})}export{Lt as default};
