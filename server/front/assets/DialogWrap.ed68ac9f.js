import{x as ge,v as Ce,f as ie,q as Se,s as _e,r as d,w as ae,a as f,I as Ee,l as $e,d as X,g as p,a8 as Ie,k as pe,c as A,R as se,j as ee}from"./index.64257940.js";import{P as Te,e as Pe,K as ce}from"./Portal.bf2e5144.js";import{p as Oe}from"./pickAttrs.91b30b21.js";var G;function te(e){if(typeof document>"u")return 0;if(e||G===void 0){var i=document.createElement("div");i.style.width="100%",i.style.height="200px";var n=document.createElement("div"),r=n.style;r.position="absolute",r.top="0",r.left="0",r.pointerEvents="none",r.visibility="hidden",r.width="200px",r.height="150px",r.overflow="hidden",n.appendChild(i),document.body.appendChild(n);var t=i.offsetWidth;n.style.overflow="scroll";var o=i.offsetWidth;t===o&&(o=n.clientWidth),document.body.removeChild(n),G=t-o}return G}function le(e){var i=e.match(/^(.*)px$/),n=Number(i==null?void 0:i[1]);return Number.isNaN(n)?te():n}function Fe(e){if(typeof document>"u"||!e||!(e instanceof Element))return{width:0,height:0};var i=getComputedStyle(e,"::-webkit-scrollbar"),n=i.width,r=i.height;return{width:le(n),height:le(r)}}function L(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!e)return{};var n=i.element,r=n===void 0?document.body:n,t={},o=Object.keys(e);return o.forEach(function(a){t[a]=r.style[a]}),o.forEach(function(a){r.style[a]=e[a]}),t}function Le(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var J={};const ue=function(e){if(!(!Le()&&!e)){var i="ant-scrolling-effect",n=new RegExp("".concat(i),"g"),r=document.body.className;if(e){if(!n.test(r))return;L(J),J={},document.body.className=r.replace(n,"").trim();return}var t=te();if(t&&(J=L({position:"relative",width:"calc(100% - ".concat(t,"px)")}),!n.test(r))){var o="".concat(r," ").concat(i);document.body.className=o.trim()}}};var De=0,g=[],ye="ant-scrolling-effect",Q=new RegExp("".concat(ye),"g"),Z=new Map,Me=ge(function e(i){var n=this;Ce(this,e),this.lockTarget=void 0,this.options=void 0,this.getContainer=function(){var r;return(r=n.options)===null||r===void 0?void 0:r.container},this.reLock=function(r){var t=g.find(function(o){var a=o.target;return a===n.lockTarget});t&&n.unLock(),n.options=r,t&&(t.options=r,n.lock())},this.lock=function(){var r;if(!g.some(function(s){var c=s.target;return c===n.lockTarget})){if(g.some(function(s){var c,u=s.options;return(u==null?void 0:u.container)===((c=n.options)===null||c===void 0?void 0:c.container)})){g=[].concat(ie(g),[{target:n.lockTarget,options:n.options}]);return}var t=0,o=((r=n.options)===null||r===void 0?void 0:r.container)||document.body;(o===document.body&&window.innerWidth-document.documentElement.clientWidth>0||o.scrollHeight>o.clientHeight)&&(t=te());var a=o.className;if(g.filter(function(s){var c,u=s.options;return(u==null?void 0:u.container)===((c=n.options)===null||c===void 0?void 0:c.container)}).length===0&&Z.set(o,L({width:t!==0?"calc(100% - ".concat(t,"px)"):void 0,overflow:"hidden",overflowX:"hidden",overflowY:"hidden"},{element:o})),!Q.test(a)){var l="".concat(a," ").concat(ye);o.className=l.trim()}g=[].concat(ie(g),[{target:n.lockTarget,options:n.options}])}},this.unLock=function(){var r,t=g.find(function(l){var s=l.target;return s===n.lockTarget});if(g=g.filter(function(l){var s=l.target;return s!==n.lockTarget}),!(!t||g.some(function(l){var s,c=l.options;return(c==null?void 0:c.container)===((s=t.options)===null||s===void 0?void 0:s.container)}))){var o=((r=n.options)===null||r===void 0?void 0:r.container)||document.body,a=o.className;!Q.test(a)||(L(Z.get(o),{element:o}),Z.delete(o),o.className=o.className.replace(Q,"").trim())}},this.lockTarget=De++,this.options=i}),b=0,W=Ee(),q={},O=function(i){if(!W)return null;if(i){if(typeof i=="string")return document.querySelectorAll(i)[0];if(typeof i=="function")return i();if($e(i)==="object"&&i instanceof window.HTMLElement)return i}return document.body},We=function(e){Se(n,e);var i=_e(n);function n(r){var t;return Ce(this,n),t=i.call(this,r),t.container=void 0,t.componentRef=d.exports.createRef(),t.rafId=void 0,t.scrollLocker=void 0,t.renderComponent=void 0,t.updateScrollLocker=function(o){var a=o||{},l=a.visible,s=t.props,c=s.getContainer,u=s.visible;u&&u!==l&&W&&O(c)!==t.scrollLocker.getContainer()&&t.scrollLocker.reLock({container:O(c)})},t.updateOpenCount=function(o){var a=o||{},l=a.visible,s=a.getContainer,c=t.props,u=c.visible,v=c.getContainer;u!==l&&W&&O(v)===document.body&&(u&&!l?b+=1:o&&(b-=1));var m=typeof v=="function"&&typeof s=="function";(m?v.toString()!==s.toString():v!==s)&&t.removeCurrentContainer()},t.attachToParent=function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(o||t.container&&!t.container.parentNode){var a=O(t.props.getContainer);return a?(a.appendChild(t.container),!0):!1}return!0},t.getContainer=function(){return W?(t.container||(t.container=document.createElement("div"),t.attachToParent(!0)),t.setWrapperClassName(),t.container):null},t.setWrapperClassName=function(){var o=t.props.wrapperClassName;t.container&&o&&o!==t.container.className&&(t.container.className=o)},t.removeCurrentContainer=function(){var o,a;(o=t.container)===null||o===void 0||(a=o.parentNode)===null||a===void 0||a.removeChild(t.container)},t.switchScrollingEffect=function(){b===1&&!Object.keys(q).length?(ue(),q=L({overflow:"hidden",overflowX:"hidden",overflowY:"hidden"})):b||(L(q),q={},ue(!0))},t.scrollLocker=new Me({container:O(r.getContainer)}),t}return ge(n,[{key:"componentDidMount",value:function(){var t=this;this.updateOpenCount(),this.attachToParent()||(this.rafId=ae(function(){t.forceUpdate()}))}},{key:"componentDidUpdate",value:function(t){this.updateOpenCount(t),this.updateScrollLocker(t),this.setWrapperClassName(),this.attachToParent()}},{key:"componentWillUnmount",value:function(){var t=this.props,o=t.visible,a=t.getContainer;W&&O(a)===document.body&&(b=o&&b?b-1:b),this.removeCurrentContainer(),ae.cancel(this.rafId)}},{key:"render",value:function(){var t=this.props,o=t.children,a=t.forceRender,l=t.visible,s=null,c={getOpenCount:function(){return b},getContainer:this.getContainer,switchScrollingEffect:this.switchScrollingEffect,scrollLocker:this.scrollLocker};return(a||l||this.componentRef.current)&&(s=f(Te,{getContainer:this.getContainer,ref:this.componentRef,children:o(c)})),s}}]),n}(d.exports.Component);function Ae(){var e=p({},Ie);return e.useId}var de=0;function Ue(e){var i=d.exports.useState("ssr-id"),n=X(i,2),r=n[0],t=n[1],o=Ae(),a=o==null?void 0:o();return d.exports.useEffect(function(){if(!o){var l=de;de+=1,t("rc_unique_".concat(l))}},[]),e||a||r}function Ve(e){var i=e.prefixCls,n=e.style,r=e.visible,t=e.maskProps,o=e.motionName;return f(pe,{visible:r,motionName:o,leavedClassName:"".concat(i,"-mask-hidden"),children:function(a){var l=a.className,s=a.style;return f("div",{style:p(p({},s),n),className:A("".concat(i,"-mask"),l),...t})}},"mask")}function fe(e,i,n){var r=i;return!r&&n&&(r="".concat(e,"-").concat(n)),r}function ve(e,i){var n=e["page".concat(i?"Y":"X","Offset")],r="scroll".concat(i?"Top":"Left");if(typeof n!="number"){var t=e.document;n=t.documentElement[r],typeof n!="number"&&(n=t.body[r])}return n}function ze(e){var i=e.getBoundingClientRect(),n={left:i.left,top:i.top},r=e.ownerDocument,t=r.defaultView||r.parentWindow;return n.left+=ve(t),n.top+=ve(t,!0),n}const je=d.exports.memo(function(e){var i=e.children;return i},function(e,i){var n=i.shouldUpdate;return!n});var me={width:0,height:0,overflow:"hidden",outline:"none"},Be=se.forwardRef(function(e,i){var n=e.prefixCls,r=e.className,t=e.style,o=e.title,a=e.ariaId,l=e.footer,s=e.closable,c=e.closeIcon,u=e.onClose,v=e.children,m=e.bodyStyle,x=e.bodyProps,N=e.modalRender,k=e.onMouseDown,E=e.onMouseUp,D=e.holderRef,R=e.visible,$=e.forceRender,C=e.width,S=e.height,w=d.exports.useRef(),_=d.exports.useRef();se.useImperativeHandle(i,function(){return{focus:function(){var y;(y=w.current)===null||y===void 0||y.focus()},changeActive:function(y){var M=document,B=M.activeElement;y&&B===_.current?w.current.focus():!y&&B===w.current&&_.current.focus()}}});var I={};C!==void 0&&(I.width=C),S!==void 0&&(I.height=S);var U;l&&(U=f("div",{className:"".concat(n,"-footer"),children:l}));var V;o&&(V=f("div",{className:"".concat(n,"-header"),children:f("div",{className:"".concat(n,"-title"),id:a,children:o})}));var z;s&&(z=f("button",{type:"button",onClick:u,"aria-label":"Close",className:"".concat(n,"-close"),children:c||f("span",{className:"".concat(n,"-close-x")})}));var j=ee("div",{className:"".concat(n,"-content"),children:[z,V,f("div",{className:"".concat(n,"-body"),style:m,...x,children:v}),U]});return ee("div",{role:"dialog","aria-labelledby":o?a:null,"aria-modal":"true",ref:D,style:p(p({},t),I),className:A(n,r),onMouseDown:k,onMouseUp:E,children:[f("div",{tabIndex:0,ref:w,style:me,"aria-hidden":"true"}),f(je,{shouldUpdate:R||$,children:N?N(j):j}),f("div",{tabIndex:0,ref:_,style:me,"aria-hidden":"true"})]},"dialog-element")}),be=d.exports.forwardRef(function(e,i){var n=e.prefixCls,r=e.title,t=e.style,o=e.className,a=e.visible,l=e.forceRender,s=e.destroyOnClose,c=e.motionName,u=e.ariaId,v=e.onVisibleChanged,m=e.mousePosition,x=d.exports.useRef(),N=d.exports.useState(),k=X(N,2),E=k[0],D=k[1],R={};E&&(R.transformOrigin=E);function $(){var C=ze(x.current);D(m?"".concat(m.x-C.left,"px ").concat(m.y-C.top,"px"):"")}return f(pe,{visible:a,onVisibleChanged:v,onAppearPrepare:$,onEnterPrepare:$,forceRender:l,motionName:c,removeOnLeave:s,ref:x,children:function(C,S){var w=C.className,_=C.style;return f(Be,{...e,ref:i,title:r,ariaId:u,prefixCls:n,holderRef:S,style:p(p(p({},_),t),R),className:A(o,w)})}})});be.displayName="Content";function he(e){var i=e.prefixCls,n=i===void 0?"rc-dialog":i,r=e.zIndex,t=e.visible,o=t===void 0?!1:t,a=e.keyboard,l=a===void 0?!0:a,s=e.focusTriggerAfterClose,c=s===void 0?!0:s,u=e.scrollLocker,v=e.wrapStyle,m=e.wrapClassName,x=e.wrapProps,N=e.onClose,k=e.afterClose,E=e.transitionName,D=e.animation,R=e.closable,$=R===void 0?!0:R,C=e.mask,S=C===void 0?!0:C,w=e.maskTransitionName,_=e.maskAnimation,I=e.maskClosable,U=I===void 0?!0:I,V=e.maskStyle,z=e.maskProps,j=e.rootClassName,T=d.exports.useRef(),y=d.exports.useRef(),M=d.exports.useRef(),B=d.exports.useState(o),ne=X(B,2),H=ne[0],oe=ne[1],Ne=Ue();function ke(h){if(h){if(!Pe(y.current,document.activeElement)){var P;T.current=document.activeElement,(P=M.current)===null||P===void 0||P.focus()}}else{if(oe(!1),S&&T.current&&c){try{T.current.focus({preventScroll:!0})}catch{}T.current=null}H&&(k==null||k())}}function Y(h){N==null||N(h)}var K=d.exports.useRef(!1),F=d.exports.useRef(),we=function(){clearTimeout(F.current),K.current=!0},xe=function(){F.current=setTimeout(function(){K.current=!1})},re=null;U&&(re=function(P){K.current?K.current=!1:y.current===P.target&&Y(P)});function Re(h){if(l&&h.keyCode===ce.ESC){h.stopPropagation(),Y(h);return}o&&h.keyCode===ce.TAB&&M.current.changeActive(!h.shiftKey)}return d.exports.useEffect(function(){return o&&oe(!0),function(){}},[o]),d.exports.useEffect(function(){return function(){clearTimeout(F.current)}},[]),d.exports.useEffect(function(){return H?(u==null||u.lock(),u==null?void 0:u.unLock):function(){}},[H,u]),ee("div",{className:A("".concat(n,"-root"),j),...Oe(e,{data:!0}),children:[f(Ve,{prefixCls:n,visible:S&&o,motionName:fe(n,w,_),style:p({zIndex:r},V),maskProps:z}),f("div",{tabIndex:-1,onKeyDown:Re,className:A("".concat(n,"-wrap"),m),ref:y,onClick:re,style:p(p({zIndex:r},v),{},{display:H?null:"none"}),...x,children:f(be,{...e,onMouseDown:we,onMouseUp:xe,ref:M,closable:$,ariaId:Ne,prefixCls:n,visible:o,onClose:Y,onVisibleChanged:ke,motionName:fe(n,E,D)})})]})}var He=function(i){var n=i.visible,r=i.getContainer,t=i.forceRender,o=i.destroyOnClose,a=o===void 0?!1:o,l=i.afterClose,s=d.exports.useState(n),c=X(s,2),u=c[0],v=c[1];return d.exports.useEffect(function(){n&&v(!0)},[n]),r===!1?f(he,{...i,getOpenCount:function(){return 2}}):!t&&a&&!u?null:f(We,{visible:n,forceRender:t,getContainer:r,children:function(m){return f(he,{...i,destroyOnClose:a,afterClose:function(){l==null||l(),v(!1)},...m})}})};He.displayName="Dialog";export{He as D,We as P,Fe as a,te as g};
