import{r as s,a9 as d,j as m,a as t,F as I}from"./index.64257940.js";import{B as E}from"./button.ca276c4e.js";import{F as u}from"./index.9d56ca15.js";import"./row.04cc9265.js";import"./index.61964446.js";import{I as D}from"./index.93b57069.js";import{M as w}from"./index.46a9404e.js";/* empty css               *//* empty css               */import{T as C}from"./Table.0fc674a8.js";import"./index.39cec35d.js";import"./iconUtil.71342ca5.js";import"./Pagination.0b310a33.js";import"./Tree.0082570b.js";import"./index.70ebfd77.js";import{T as P}from"./index.5b2f5049.js";import{P as S}from"./index.396a50a9.js";import{l as M}from"./Editor.88c5e82e.js";import{i as p}from"./use-immer.module.72e4ecef.js";import{g as K,I as L}from"./index.e073bbb6.js";import{s as r}from"./subs.module.53f6f584.js";M.config({paths:{vs:"/modules/monaco-editor/min/vs"}});const g={postAuthentication:"auth/postAuthentication",revalidate:"auth/revalidate",postLogout:"auth/postLogout",mutatingPostAuthentication:"auth/mutatingPostAuthentication"};function ue(){const[l]=u.useForm(),b=u.useWatch("id",l),[k,i]=p(!1),[h,B]=p([]),[c,f]=s.exports.useState(),[a,R]=s.exports.useState("postAuthentication"),[n,V]=p([]);s.exports.useState();const[F,y]=s.exports.useState({});s.exports.useEffect(()=>{d.get("/role").then(e=>{B(e)})},[c]);const A=async e=>{await d[e.id?"put":"post"]("/role",{...e}),i(!1),f(!c)},v=async e=>{await d.delete(`/role/${e}`),f(!c)},x=[{title:"\u89D2\u8272",dataIndex:"code",key:"code"},{title:"\u89D2\u8272\u63CF\u8FF0",dataIndex:"remark",key:"remark"},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",key:"createTime"},{title:"\u64CD\u4F5C",key:4,render:(e,o)=>m(I,{children:[t("span",{className:"cursor-pointer pl-0 text-red-500 mr-1",onClick:()=>{l.setFieldsValue(o),i(!0)},children:"\u7F16\u8F91"}),t(S,{title:"\u786E\u5B9A\u8981\u5220\u9664?",okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88",onConfirm:()=>{v(o.id)},children:t("span",{className:"cursor-pointer pl-0 text-red-500",children:"\u5220\u9664"})})]})}];s.exports.useMemo(()=>n==null?void 0:n.find(e=>e.hookName===a),[a,n]),s.exports.useEffect(()=>{K(`auth.${a}`).then(e=>{y({...F,[a]:e})})},[a]);const[N,T]=s.exports.useState("role");return m("div",{className:"relative h-full flex "+r.roleContainer,children:[N==="role"?t("div",{className:"top-2px right-0 absolute",children:t(E,{className:"h-7.5 py-0 px-4",onClick:()=>{l.setFieldsValue({id:void 0,code:"",remark:""}),i(!0)},children:t("span",{className:"text-sm text-gray",children:"\u6DFB\u52A0"})})}):"",t(P,{className:"h-full w-full",renderTabBar:(e,o)=>t(o,{className:r.pillTab,...e}),onChange:T,items:[{label:"\u89D2\u8272\u7BA1\u7406",key:"role",children:m("div",{className:r.tabContent,children:[k&&t(w,{open:!0,mask:!1,title:b?"\u7F16\u8F91\u89D2\u8272":"\u6DFB\u52A0\u89D2\u8272",style:{top:"200px"},width:549,transitionName:"",onOk:()=>{l.submit()},onCancel:()=>i(!1),okText:"\u4FDD\u5B58",okButtonProps:{className:r["save-btn"]},okType:"text",cancelText:"\u53D6\u6D88",children:m(u,{name:"roleList",form:l,labelCol:{span:6},wrapperCol:{span:16},onFinish:e=>{A({...e})},autoComplete:"off",labelAlign:"left",className:"h-30 mt-8 ml-8",children:[t(u.Item,{label:"\u89D2\u8272code",name:"code",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u89D2\u8272\u7F16\u7801"},{pattern:/^[_a-zA-Z][_a-zA-Z\d]*$/g,message:"\u8BF7\u8F93\u5165\u6570\u5B57\u3001\u5B57\u6BCD\u6216\u4E0B\u5212\u7EBF\uFF0C\u7B2C\u4E00\u4F4D\u4E0D\u80FD\u662F\u6570\u5B57"}],children:t(D,{})}),t(u.Item,{label:"\u89D2\u8272\u63CF\u8FF0",name:"remark",children:t(D,{})}),t(u.Item,{name:"id"}),t(u.Item,{name:"createTime"})]})}),t("div",{className:r["role-container-table"],children:h.length>0?t(C,{columns:x,dataSource:h,rowKey:e=>e.id,rowClassName:(e,o)=>o%2===1?r["role-table"]:"",pagination:!1}):t(C,{columns:x,dataSource:[],rowKey:e=>e.id,rowClassName:(e,o)=>o%2===1?r["role-table"]:"",pagination:!1})})]})},{label:"\u8EAB\u4EFD\u9274\u6743",key:"auth",children:t("div",{className:r.tabContent,children:t("div",{children:t(L,{hookPath:g[a],defaultLanguage:"typescript",onChange:console.log,defaultCode:F[a]},g[a])})})}]})]})}export{ue as A};
