import{r as m,V as ke,d as E,a as l,C as J,c as W,e as j,N as K,$ as Z,m as ye,j as M,F as U,a0 as he,_ as g,f as A,a1 as Pe,a2 as be,a3 as ee,a4 as Te,a5 as Oe,a6 as we,a7 as Ne,H as Se}from"./index.64257940.js";import{B as Q,a as ne}from"./button.ca276c4e.js";import{g as L}from"./Portal.bf2e5144.js";import{D as Re}from"./DialogWrap.ed68ac9f.js";import{N as Fe}from"./context.4fcda71f.js";import{c as Ie}from"./styleChecker.9486324a.js";function G(n){return!!(n&&!!n.then)}var pe=function(e){var o=m.exports.useRef(!1),t=m.exports.useRef(),r=ke(!1),i=E(r,2),y=i[0],a=i[1],u=e.close,f=function(){u==null||u.apply(void 0,arguments)};m.exports.useEffect(function(){var s;if(e.autoFocus){var C=t.current;s=setTimeout(function(){return C.focus()})}return function(){s&&clearTimeout(s)}},[]);var d=function(C){!G(C)||(a(!0),C.then(function(){a(!1,!0),f.apply(void 0,arguments),o.current=!1},function(v){console.error(v),a(!1,!0),o.current=!1}))},c=function(C){var v=e.actionFn;if(!o.current){if(o.current=!0,!v){f();return}var x;if(e.emitEvent){if(x=v(C),e.quitOnNullishReturnValue&&!G(x)){o.current=!1,f(C);return}}else if(v.length)x=v(u),o.current=!1;else if(x=v(),!x){f();return}d(x)}},b=e.type,h=e.children,T=e.prefixCls,P=e.buttonProps;return l(Q,{...ne(b),onClick:c,loading:y,prefixCls:T,...P,ref:t,children:h})};const X=pe;var Ae=globalThis&&globalThis.__rest||function(n,e){var o={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&e.indexOf(t)<0&&(o[t]=n[t]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(n);r<t.length;r++)e.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(n,t[r])&&(o[t[r]]=n[t[r]]);return o},V,Ee=function(e){V={x:e.pageX,y:e.pageY},setTimeout(function(){V=null},100)};Ie()&&document.documentElement.addEventListener("click",Ee,!0);var te=function(e){var o,t=m.exports.useContext(J),r=t.getPopupContainer,i=t.getPrefixCls,y=t.direction,a=function(F){var O=e.onCancel;O==null||O(F)},u=function(F){var O=e.onOk;O==null||O(F)},f=function(F){var O=e.okText,D=e.okType,w=e.cancelText,H=e.confirmLoading;return M(U,{children:[l(Q,{onClick:a,...e.cancelButtonProps,children:w||F.cancelText}),l(Q,{...ne(D),loading:H,onClick:u,...e.okButtonProps,children:O||F.okText})]})},d=e.prefixCls,c=e.footer,b=e.visible,h=e.open,T=e.wrapClassName,P=e.centered,s=e.getContainer,C=e.closeIcon,v=e.focusTriggerAfterClose,x=v===void 0?!0:v,N=Ae(e,["prefixCls","footer","visible","open","wrapClassName","centered","getContainer","closeIcon","focusTriggerAfterClose"]),k=i("modal",d),R=i(),$=l(K,{componentName:"Modal",defaultLocale:Z(),children:f}),I=l("span",{className:"".concat(k,"-close-x"),children:C||l(ye,{className:"".concat(k,"-close-icon")})}),z=W(T,(o={},j(o,"".concat(k,"-centered"),!!P),j(o,"".concat(k,"-wrap-rtl"),y==="rtl"),o));return l(Fe,{status:!0,override:!0,children:l(Re,{...N,getContainer:s===void 0?r:s,prefixCls:k,wrapClassName:z,footer:c===void 0?$:c,visible:h||b,mousePosition:V,onClose:a,closeIcon:I,focusTriggerAfterClose:x,transitionName:L(R,"zoom",e.transitionName),maskTransitionName:L(R,"fade",e.maskTransitionName)})})};te.defaultProps={width:520,confirmLoading:!1,open:!1,okType:"primary"};const oe=te;var $e=function(e){var o=e.icon,t=e.onCancel,r=e.onOk,i=e.close,y=e.zIndex,a=e.afterClose,u=e.visible,f=e.open,d=e.keyboard,c=e.centered,b=e.getContainer,h=e.maskStyle,T=e.okText,P=e.okButtonProps,s=e.cancelText,C=e.cancelButtonProps,v=e.direction,x=e.prefixCls,N=e.wrapClassName,k=e.rootPrefixCls,R=e.iconPrefixCls,$=e.bodyStyle,I=e.closable,z=I===void 0?!1:I,B=e.closeIcon,F=e.modalRender,O=e.focusTriggerAfterClose,D=e.okType||"primary",w="".concat(x,"-confirm"),H="okCancel"in e?e.okCancel:!0,de=e.width||416,Ce=e.style||{},me=e.mask===void 0?!0:e.mask,ve=e.maskClosable===void 0?!1:e.maskClosable,q=e.autoFocusButton===null?!1:e.autoFocusButton||"ok",xe=W(w,"".concat(w,"-").concat(e.type),j({},"".concat(w,"-rtl"),v==="rtl"),e.className),ge=H&&l(X,{actionFn:t,close:i,autoFocus:q==="cancel",buttonProps:C,prefixCls:"".concat(k,"-btn"),children:s});return l(he,{prefixCls:k,iconPrefixCls:R,direction:v,children:l(oe,{prefixCls:x,className:xe,wrapClassName:W(j({},"".concat(w,"-centered"),!!e.centered),N),onCancel:function(){return i==null?void 0:i({triggerCancel:!0})},open:f||u,title:"",footer:"",transitionName:L(k,"zoom",e.transitionName),maskTransitionName:L(k,"fade",e.maskTransitionName),mask:me,maskClosable:ve,maskStyle:h,style:Ce,bodyStyle:$,width:de,zIndex:y,afterClose:a,keyboard:d,centered:c,getContainer:b,closable:z,closeIcon:B,modalRender:F,focusTriggerAfterClose:O,children:M("div",{className:"".concat(w,"-body-wrapper"),children:[M("div",{className:"".concat(w,"-body"),children:[o,e.title===void 0?null:l("span",{className:"".concat(w,"-title"),children:e.title}),l("div",{className:"".concat(w,"-content"),children:e.content})]}),M("div",{className:"".concat(w,"-btns"),children:[ge,l(X,{type:D,actionFn:r,close:i,autoFocus:q==="ok",buttonProps:P,prefixCls:"".concat(k,"-btn"),children:T})]})]})})})};const re=$e;var _e=[];const p=_e;var Be=globalThis&&globalThis.__rest||function(n,e){var o={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&e.indexOf(t)<0&&(o[t]=n[t]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(n);r<t.length;r++)e.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(n,t[r])&&(o[t[r]]=n[t[r]]);return o},ae="";function Me(){return ae}function _(n){var e=document.createDocumentFragment(),o=g(g({},n),{close:i,open:!0});function t(){for(var a=arguments.length,u=new Array(a),f=0;f<a;f++)u[f]=arguments[f];var d=u.some(function(h){return h&&h.triggerCancel});n.onCancel&&d&&n.onCancel.apply(n,[function(){}].concat(A(u.slice(1))));for(var c=0;c<p.length;c++){var b=p[c];if(b===i){p.splice(c,1);break}}Pe(e)}function r(a){var u=a.okText,f=a.cancelText,d=a.prefixCls,c=a.open,b=a.visible,h=Be(a,["okText","cancelText","prefixCls","open","visible"]);setTimeout(function(){var T=Z(),P=Ne(),s=P.getPrefixCls,C=P.getIconPrefixCls,v=s(void 0,Me()),x=d||"".concat(v,"-modal"),N=C();be(l(re,{...h,open:c!=null?c:b,prefixCls:x,rootPrefixCls:v,iconPrefixCls:N,okText:u||(h.okCancel?T.okText:T.justOkText),cancelText:f||T.cancelText}),e)})}function i(){for(var a=this,u=arguments.length,f=new Array(u),d=0;d<u;d++)f[d]=arguments[d];o=g(g({},o),{open:!1,afterClose:function(){typeof n.afterClose=="function"&&n.afterClose(),t.apply(a,f)}}),r(o)}function y(a){typeof a=="function"?o=a(o):o=g(g({},o),a),r(o)}return r(o),p.push(i),{destroy:i,update:y}}function ce(n){return g(g({icon:l(ee,{}),okCancel:!1},n),{type:"warning"})}function ie(n){return g(g({icon:l(Te,{}),okCancel:!1},n),{type:"info"})}function le(n){return g(g({icon:l(Oe,{}),okCancel:!1},n),{type:"success"})}function se(n){return g(g({icon:l(we,{}),okCancel:!1},n),{type:"error"})}function ue(n){return g(g({icon:l(ee,{}),okCancel:!0},n),{type:"confirm"})}function je(n){var e=n.rootPrefixCls;ae=e}function Le(){var n=m.exports.useState([]),e=E(n,2),o=e[0],t=e[1],r=m.exports.useCallback(function(i){return t(function(y){return[].concat(A(y),[i])}),function(){t(function(y){return y.filter(function(a){return a!==i})})}},[]);return[o,r]}var ze=function(e,o){var t=e.afterClose,r=e.config,i=m.exports.useState(!0),y=E(i,2),a=y[0],u=y[1],f=m.exports.useState(r),d=E(f,2),c=d[0],b=d[1],h=m.exports.useContext(J),T=h.direction,P=h.getPrefixCls,s=P("modal"),C=P(),v=function(){u(!1);for(var N=arguments.length,k=new Array(N),R=0;R<N;R++)k[R]=arguments[R];var $=k.some(function(I){return I&&I.triggerCancel});c.onCancel&&$&&c.onCancel.apply(c,[function(){}].concat(A(k.slice(1))))};return m.exports.useImperativeHandle(o,function(){return{destroy:v,update:function(N){b(function(k){return g(g({},k),N)})}}}),l(K,{componentName:"Modal",defaultLocale:Se.Modal,children:function(x){return l(re,{prefixCls:s,rootPrefixCls:C,...c,close:v,open:a,afterClose:t,okText:c.okText||(c.okCancel?x.okText:x.justOkText),direction:T,cancelText:c.cancelText||x.cancelText})}})};const De=m.exports.forwardRef(ze);var Y=0,He=m.exports.memo(m.exports.forwardRef(function(n,e){var o=Le(),t=E(o,2),r=t[0],i=t[1];return m.exports.useImperativeHandle(e,function(){return{patchElement:i}},[]),l(U,{children:r})}));function We(){var n=m.exports.useRef(null),e=m.exports.useState([]),o=E(e,2),t=o[0],r=o[1];m.exports.useEffect(function(){if(t.length){var a=A(t);a.forEach(function(u){u()}),r([])}},[t]);var i=m.exports.useCallback(function(a){return function(f){var d;Y+=1;var c=m.exports.createRef(),b,h=l(De,{config:a(f),ref:c,afterClose:function(){b()}},"modal-".concat(Y));return b=(d=n.current)===null||d===void 0?void 0:d.patchElement(h),{destroy:function(){function P(){var s;(s=c.current)===null||s===void 0||s.destroy()}c.current?P():r(function(s){return[].concat(A(s),[P])})},update:function(P){function s(){var C;(C=c.current)===null||C===void 0||C.update(P)}c.current?s():r(function(C){return[].concat(A(C),[s])})}}}},[]),y=m.exports.useMemo(function(){return{info:i(ie),success:i(le),error:i(se),warning:i(ce),confirm:i(ue)}},[]);return[y,l(He,{ref:n})]}function fe(n){return _(ce(n))}var S=oe;S.useModal=We;S.info=function(e){return _(ie(e))};S.success=function(e){return _(le(e))};S.error=function(e){return _(se(e))};S.warning=fe;S.warn=fe;S.confirm=function(e){return _(ue(e))};S.destroyAll=function(){for(;p.length;){var e=p.pop();e&&e()}};S.config=je;const Ke=S;export{X as A,Ke as M};
