import{a as e,F as L,j as r,r as g,a9 as F,aw as he,q as fe,s as ge,v as ve,x as Ce,d as be,C as xe,c as se,e as z,k as Fe,_ as ie,m as ye,ak as Ee,aZ as we,M as Ne,al as De,a5 as Ie,a4 as Be,a6 as ke,a3 as Se}from"./index.64257940.js";import{C as oe}from"./row.04cc9265.js";import{i as b}from"./use-immer.module.72e4ecef.js";import{I as J}from"./index.90bee82c.js";import{B as ae,r as Ae}from"./button.ca276c4e.js";import{F as c}from"./index.9d56ca15.js";import"./index.61964446.js";import{I as P}from"./index.93b57069.js";import"./iconUtil.71342ca5.js";import{S as M}from"./index.4ef503cf.js";import{S as T}from"./index.21d0aee3.js";import{F as ue}from"./FormTooltip.4fa0aed3.js";import{I as E}from"./index.2b25ba57.js";import{H as re}from"./constant.0f5b1976.js";import{P as le}from"./PlusOutlined.3088ee84.js";/* empty css               */import{M as _e}from"./index.46a9404e.js";/* empty css               *//* empty css               */import{T as Pe}from"./Table.0fc674a8.js";import"./index.39cec35d.js";import"./Pagination.0b310a33.js";import{g as Oe,R as $}from"./Tree.0082570b.js";import"./index.70ebfd77.js";import{D as I}from"./index.a571ed2b.js";import{P as Te}from"./index.396a50a9.js";import{d as G}from"./dayjs.min.9104a23a.js";import{d as Le}from"./duration.d1df7432.js";import{c as Ve}from"./clsx.m.70024c70.js";import{W as He}from"./workbenchContext.4d536977.js";import"./styleChecker.9486324a.js";import"./context.4fcda71f.js";import"./Portal.bf2e5144.js";import"./type.4482a080.js";import"./_baseIsEqual.ae1f3f6e.js";import"./omit.173224d8.js";import"./responsiveObserve.a761adf9.js";import"./EyeOutlined.8d71b64e.js";import"./css.7dd30b7b.js";import"./DialogWrap.ed68ac9f.js";import"./pickAttrs.91b30b21.js";import"./RightOutlined.ce6e99f7.js";import"./statusUtils.e7207d24.js";import"./SearchOutlined.d2d234c2.js";import"./Overflow.ff04d686.js";import"./index.e257c064.js";import"./Dropdown.66094b27.js";import"./Sider.4bd14ece.js";import"./useForceUpdate.cd5983fc.js";import"./conductUtil.91a30912.js";import"./DoubleRightOutlined.d12d812f.js";import"./isSymbol.d728fe31.js";import"./index.2fd29b41.js";const Re="_setTitle_13y0r_13",$e="_authSetFrom_13y0r_77",Me="_envTable_13y0r_162",w={"picture-box":"_picture-box_13y0r_1","item-label":"_item-label_13y0r_6",setTitle:Re,"descriptions-box":"_descriptions-box_13y0r_21","check-info":"_check-info_13y0r_30","modal-save-btn":"_modal-save-btn_13y0r_35","save-btn":"_save-btn_13y0r_39","save-env-btn":"_save-env-btn_13y0r_55",authSetFrom:$e,"ant-modal-title":"_ant-modal-title_13y0r_97","switch-edit-btn":"_switch-edit-btn_13y0r_104","edit-btn":"_edit-btn_13y0r_112","form-contain":"_form-contain_13y0r_140","security-form-contain":"_security-form-contain_13y0r_149","form-delete-icon":"_form-delete-icon_13y0r_153",envTable:Me};function je(){return e(L,{children:e("div",{className:"pt-8",children:r("div",{className:`${w["picture-box"]} flex`,children:[r("div",{className:"ml-8",children:[e(J,{src:"/assets/system.svg",alt:"\u56FE\u7247\u4E0D\u89C1\u4E86"}),e("div",{className:"text-14px text-center leading-5 mt-2",children:"\u7CFB\u7EDF"})]}),r("div",{className:"ml-9",children:[e(J,{src:"/assets/light.svg",alt:"\u56FE\u7247\u4E0D\u89C1\u4E86"}),e("div",{className:"text-14px text-center leading-5 mt-2",children:"\u4EAE\u8272"})]}),r("div",{className:"ml-9",children:[e(J,{src:"/assets/dark.svg",alt:"\u56FE\u7247\u4E0D\u89C1\u4E86"}),e("div",{className:"text-14px text-center leading-5 mt-2",children:"\u6697\u8272"})]}),r("div",{className:"ml-9",children:[e(J,{src:"/assets/black.svg",alt:"\u56FE\u7247\u4E0D\u89C1\u4E86"}),e("div",{className:"text-14px text-center leading-5 mt-2",children:"\u9ED1\u8272"})]})]})})})}const qe="/assets/tip-cros.822214df.png",Ue={wrapperCol:{xs:{span:24},sm:{span:16}}};function ze(){const[a,t]=b({}),[n]=c.useForm(),[s,l]=g.exports.useState(),d=g.exports.useCallback(async(i,u)=>{await F.post("/global",{key:i,val:u})},[]);return g.exports.useEffect(()=>{F.get("/setting/corsConfiguration").then(i=>{t(i)})},[s]),e(L,{children:a.allowedOrigins?e("div",{className:"pt-8 pl-8",children:r(c,{form:n,initialValues:{allowedMethods:a.allowedMethods,maxAge:a.maxAge,allowedHeaders:a.allowedHeaders,exposedHeaders:a.exposedHeaders,allowCredentials:a.allowCredentials},labelAlign:"left",labelCol:{xs:{span:3},sm:{span:3}},wrapperCol:{xs:{span:10},sm:{span:9}},children:[r(c.Item,{label:r("div",{children:[e("span",{children:"\u5141\u8BB8\u6E90"}),e(ue,{className:"!left-4",title:e("img",{src:qe,className:"max-w-60vw max-h-60vh",alt:""})})]}),wrapperCol:{xs:{span:20},sm:{span:20}},children:[e(M,{className:w["switch-edit-btn"],checked:a.allowedOriginsEnable,size:"small",onChange:i=>{d("allowedOriginsEnable",i).then(()=>{l(!s)})}}),e("span",{className:"ml-4 text-default",children:"\u5141\u8BB8\u5168\u90E8"})]}),!a.allowedOriginsEnable&&e(c.Item,{wrapperCol:{offset:3,xs:{span:20},sm:{span:20}},children:e(c.List,{name:"allowedOrigins",initialValue:a.allowedOrigins,children:(i,{add:u,remove:m},{errors:k})=>r(L,{children:[i.map((N,x)=>{var S;const v=n.getFieldValue(["allowedOrigins",N.name])||"https://",h=(f,o)=>{let[,p="https://",O=""]=(v==null?void 0:v.match(/(^https?:\/\/)(.*)/))||[];f==="protocol"?p=o:O=o;const A=`${p}${O}`;n.setFieldValue(["allowedOrigins",N.name],A),f==="protocol"&&D()},D=()=>{n.getFieldValue("allowedOrigins").filter(f=>f==null?void 0:f.replace(/https?:\/\//,"").trim()),d("allowedOrigins",n.getFieldValue("allowedOrigins")).then(()=>{l(!s)})};return g.exports.createElement(c.Item,{...Ue,required:!1,key:N.key},e(c.Item,{validateTrigger:["onChange","onBlur"],noStyle:!0,children:r("div",{children:[e("div",{children:"\u57DF\u540D"+(x+1).toString()+":"}),e(P,{addonBefore:r(T,{defaultValue:(S=v.match(/^https?:\/\//))==null?void 0:S[0],className:"select-before",onChange:f=>h("protocol",f),children:[e(T.Option,{value:"https://",children:"https://"}),e(T.Option,{value:"http://",children:"http://"})]}),placeholder:"\u5BF9\u5E94\u8BF7\u6C42\u54CD\u5E94\u4E2D\u7684: Access-Control-Allow-Origin",style:{width:"60%"},onChange:f=>h("path",f.target.value),defaultValue:v.replace(/^https?:\/\//,""),onBlur:D,onPressEnter:D}),e("span",{className:`${w["form-delete-icon"]}`,onClick:()=>{F.post("/global",{key:"allowedOrigins",val:n.getFieldValue("allowedOrigins").filter((f,o)=>o!=x)}).then(()=>{m(x)})},children:e("img",{src:"/assets/deleteIcon.svg",alt:" "})})]})}))}),r(c.Item,{wrapperCol:{span:20},className:"mt-4",children:[e(ae,{type:"dashed",style:{width:"48%"},icon:e(le,{}),className:"text-gray-500/60",onClick:()=>u(),children:"\u65B0\u589EOrigin"}),e(c.ErrorList,{errors:k})]})]})})}),e(c.Item,{name:"allowedMethods",label:"\u5141\u8BB8\u65B9\u6CD5",className:"-mt-3",children:e(T,{style:{width:"90%"},mode:"multiple",placeholder:"\u8BF7\u9009\u62E9...",onChange:i=>{d("allowedMethods",i).then(()=>{l(!s)})},children:["GET","POST"].map(i=>e(T.Option,{value:i,children:i},i))})}),e(c.Item,{name:"allowedHeaders",label:"\u5141\u8BB8\u5934",children:e(T,{mode:"tags",options:re.map(i=>({label:i,value:i})),onChange:i=>{d("allowedHeaders",i).then(()=>{l(!s)})}})}),e(c.Item,{name:"exposedHeaders",label:"\u6392\u9664\u5934",children:e(T,{mode:"tags",options:re.map(i=>({label:i,value:i})),onChange:i=>{d("exposedHeaders",i).then(()=>{l(!s)})}})}),e(c.Item,{label:"\u8DE8\u57DF\u65F6\u95F4",children:e(c.Item,{name:"maxAge",validateTrigger:["onChange","onBlur"],noStyle:!0,rules:[{validator:(i,u)=>{if(u)return u<0||u>86400?Promise.reject("\u8BF7\u586B\u5199\u8303\u56F4\u5185\u7684\u8DE8\u57DF\u65F6\u95F4,\u8303\u56F4\u4E3A0- 86400 \u79D2"):Promise.resolve()}}],children:e(P,{addonAfter:"\u79D2",onBlur:()=>{d("maxAge",Number(n.getFieldValue("maxAge"))).then(()=>{l(!s)})},onPressEnter:()=>{d("maxAge",Number(n.getFieldValue("maxAge"))).then(()=>{l(!s)})}})})}),r(c.Item,{label:"\u5141\u8BB8\u8BC1\u4E66",children:[e(c.Item,{valuePropName:"checked",name:"allowCredentials",noStyle:!0,required:!0,children:e(M,{size:"small",className:w["switch-edit-btn"],checked:a.allowCredentials,onChange:i=>{d("allowCredentials",i).then(()=>{l(!s)})}})}),r("span",{className:"ml-4 text-gray-500 inline-block h-6",children:[e(E,{type:"icon-zhuyi",className:"text-[14px]"})," \u662F\u5426\u5141\u8BB8\u8BC1\u4E66"]})]})]})}):""})}function Ge(){var Y,B,Z;const[a]=c.useForm(),[t,n]=g.exports.useState(),[s,l]=b(!1),[d,i]=b(!1),[u,m]=b(!1),[k,N]=b(!0),[x,v]=b([]),[h,D]=b(-1),[S,f]=b([]),[o,p]=g.exports.useState("");g.exports.useEffect(()=>{F.get("/env").then(C=>{C.forEach(y=>{y.oldKey=y.key}),f(C),v(C.filter(y=>{y.envType==1}))})},[t]);const O=C=>{if(h==-1)F.post("/env",C).then(()=>{n(!t),i(!1)});else{const y={...C,id:h};F.put("/env",y).then(()=>{n(!t),i(!1)})}},A=C=>{console.log("Failed:",C)},j=C=>{F.delete(`/env/${C}`).then(()=>{n(!t)})},Q=()=>{l(!s)},K=C=>C===o,q=C=>{p(C),m(!u)},X=()=>{a.resetFields(),i(!0)},W=()=>{const C=a.getFieldsError().some(({errors:y})=>y.length);N(C)},ee=[{title:"\u53D8\u91CF\u540D",dataIndex:"key",key:"key",width:200},{title:"\u5F00\u53D1\u73AF\u5883",dataIndex:"devEnv",key:"devEnv",width:200},{title:"\u751F\u4EA7\u73AF\u5883",key:"proEnv",dataIndex:"proEnv",width:200,render:(C,{key:y,proEnv:V})=>K(y)?u?r("div",{children:[e("span",{children:V})," ",e(E,{type:"icon-xiaoyanjing-chakan",className:"ml-6",onClick:()=>q(y)})," "]}):r("div",{children:[" ",e("span",{children:"**************"})," ",e(E,{type:"icon-xiaoyanjing-yincang",className:"ml-6",onClick:()=>q(y)})]}):r("div",{children:[" ",e("span",{children:"**************"})," ",e(E,{type:"icon-xiaoyanjing-yincang",className:"ml-6",onClick:()=>q(y)})]})},{title:"\u64CD\u4F5C",dataIndex:"action",width:200,render:(C,{id:y,key:V,devEnv:R,proEnv:te,oldKey:ne})=>r("div",{children:[e(E,{type:"icon-zhongmingming",onClick:()=>{i(!0),a.setFieldsValue({key:V,devEnv:R,proEnv:te,oldKey:ne}),D(y)},className:"mr-3"}),e(Te,{title:"\u786E\u5B9A\u8981\u5220\u9664?",okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88",onConfirm:_=>{_.stopPropagation(),j(V)},onCancel:_=>{_.stopPropagation()},children:e(E,{type:"icon-shanchu",onClick:_=>_.stopPropagation()})})]})}];return e(L,{children:r("div",{className:"px-8 bg-white h-full pt-7",children:[r("div",{className:"flex justify-between",children:[e("div",{className:"mt-0",children:e("span",{children:"\u73AF\u5883\u53D8\u91CF"})}),e("button",{className:"btn-save mb-4 border-none font-14px",onClick:X,children:e("span",{className:"h-7",onClick:()=>{a.setFieldsValue({key:"",devEnv:"",proEnv:""}),i(!0),D(-1)},children:"\u65B0\u5EFA\u53D8\u91CF"})})]}),e(_e,{mask:!1,title:h===-1?"\u65B0\u589E\u73AF\u5883\u53D8\u91CF":"\u4FEE\u6539\u73AF\u5883\u53D8\u91CF",forceRender:!0,transitionName:"",bodyStyle:{width:"549px",height:"200px",margin:"12px auto"},open:d,onCancel:()=>i(!1),okText:e("span",{className:w["save-env-btn"],onClick:()=>{a.submit()},children:h===-1?"\u521B\u5EFA":"\u4FDD\u5B58"}),cancelText:e("span",{className:"w-10",children:"\u53D6\u6D88"}),okType:"text",children:r(c,{name:"envList",form:a,validateTrigger:["onBlur","onChange"],className:"ml-15",labelCol:{span:4},wrapperCol:{span:15},onFinish:C=>{O(C)},autoComplete:"off",onValuesChange:W,onFinishFailed:A,labelAlign:"left",children:[e(c.Item,{label:"\u540D\u79F0",name:"key",rules:[{required:!0,message:"\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A"},{pattern:new RegExp("^[a-zA-Z_][a-zA-Z0-9_]*$","g"),message:"\u4EE5\u5B57\u6BCD\u6216\u4E0B\u5212\u7EBF\u5F00\u5934\uFF0C\u53EA\u80FD\u7531\u6570\u5B57\u3001\u5B57\u6BCD\u3001\u4E0B\u5212\u7EBF\u7EC4\u6210"},{validator:(C,y)=>y===a.getFieldValue("oldKey")?Promise.resolve():S.find(R=>R.key==y)?Promise.reject("\u540D\u79F0\u91CD\u590D"):Promise.resolve()}],children:e(P,{})}),e(c.Item,{name:"oldKey",hidden:!0}),e(c.Item,{label:"\u5F00\u53D1\u73AF\u5883",name:"devEnv",rules:[{required:!0,message:"\u5F00\u53D1\u73AF\u5883\u4E0D\u80FD\u4E3A\u7A7A"},{pattern:/^.{1,256}$/g,message:"\u8BF7\u8F93\u5165\u957F\u5EA6\u4E0D\u5927\u4E8E256\u7684\u975E\u7A7A\u503C"}],children:e(P,{})}),e(c.Item,{label:"\u751F\u4EA7\u73AF\u5883",name:"proEnv",rules:[{required:!0,message:"\u751F\u4EA7\u73AF\u5883\u4E0D\u80FD\u4E3A\u7A7A"},{pattern:/^.{1,256}$/g,message:"\u8BF7\u8F93\u5165\u957F\u5EA6\u4E0D\u5927\u4E8E256\u7684\u975E\u7A7A\u503C"}],children:e(P,{})})]})}),e(Pe,{columns:ee,dataSource:S,rowKey:C=>C.key,pagination:!1,className:"mb-3 "+w.envTable}),r("div",{className:"border-gray border-b",children:[e("div",{children:e("span",{children:"\u7CFB\u7EDF\u53D8\u91CF"})}),e(I,{className:"mt-3",bordered:!0,column:1,size:"small",labelStyle:{color:"#5F6269",backgroundColor:"white",width:"30%",borderRight:"none",borderBottom:"none"},children:e(I.Item,{label:(Y=x[0])!=null&&Y.key?(B=x[0])==null?void 0:B.key:"FIREBOOM_ADMINZ_SECR",children:e("span",{onClick:Q,children:s?r("div",{children:[(Z=x[0])==null?void 0:Z.devEnv,e(E,{type:"icon-xiaoyanjing-chakan",className:"ml-6"})]}):r("div",{children:[e("span",{children:"**************"}),e(E,{type:"icon-xiaoyanjing-yincang",className:"ml-6"})]})})})})]})]})})}const Qe="/assets/tip-graphql.1fffee0a.png",de={wrapperCol:{xs:{span:24},sm:{span:16}}};function Ke(){const[a,t]=b([]),[n,s]=b(!1),[l]=c.useForm(),[d,i]=g.exports.useState();return g.exports.useEffect(()=>{F.get("/auth/redirectUrl").then(u=>{t(u),s(!0)})},[d]),e(L,{children:n?e("div",{className:`${w["form-contain"]} `,children:e(c,{form:l,initialValues:{redirectURLs:a},labelAlign:"left",labelCol:{xs:{span:4},sm:{span:4}},wrapperCol:{xs:{span:10},sm:{span:9}},children:e(c.Item,{label:"\u91CD\u5B9A\u5411URL",wrapperCol:{xs:{span:20},sm:{span:20}},children:e(c.List,{name:"redirectURLs",children:(u,{add:m,remove:k},{errors:N})=>r(L,{children:[u.map((x,v)=>{var f;const h=l.getFieldValue(["redirectURLs",x.name])||"https://",D=(o,p)=>{let[,O="https://",A=""]=(h==null?void 0:h.match(/(^https?:\/\/)(.*)/))||[];o==="protocol"?O=p:A=p;const j=`${O}${A}`;l.setFieldValue(["redirectURLs",x.name],j),o==="protocol"&&S()},S=()=>{const o=l.getFieldValue("redirectURLs").filter(p=>p==null?void 0:p.replace(/https?:\/\//,"").trim());F.post("/auth/redirectUrl",{redirectURLs:o}).then(()=>{i(!d)})};return g.exports.createElement(c.Item,{...de,required:!1,key:x.key},e(c.Item,{validateTrigger:["onChange","onBlur"],noStyle:!0,children:r("div",{children:[e("div",{children:"\u57DF\u540D"+(v+1).toString()+":"}),e(P,{addonBefore:r(T,{defaultValue:(f=h.match(/^https?:\/\//))==null?void 0:f[0],className:"select-before",onChange:o=>D("protocol",o),children:[e(T.Option,{value:"https://",children:"https://"}),e(T.Option,{value:"http://",children:"http://"})]}),placeholder:"\u8BF7\u8F93\u5165\u57DF\u540D",style:{width:"60%"},onChange:o=>D("path",o.target.value),defaultValue:h.replace(/^https?:\/\//,""),onBlur:S,onPressEnter:S}),e("span",{className:`${w["form-delete-icon"]}`,onClick:()=>{F.post("/auth/redirectUrl",{redirectURLs:l.getFieldValue("redirectURLs").filter((o,p)=>p!=v)}).then(()=>{k(v),i(!d)})},children:e("img",{src:"/assets/deleteIcon.svg",alt:" "})})]})}))}),r(c.Item,{wrapperCol:{span:20},className:"mt-4",children:[e(ae,{type:"dashed",style:{width:"48%"},icon:e(le,{}),className:"text-gray-500/60",onClick:()=>m(),children:"\u65B0\u589EURL"}),e(c.ErrorList,{errors:N})]})]})})})})}):null})}function We(){const[a]=c.useForm(),[t,n]=b({}),[s,l]=g.exports.useState(),{config:d}=g.exports.useContext(he),i=async(u,m)=>{await F.post("/global",{key:u,val:m})};return g.exports.useEffect(()=>{F.get("/setting/securityConfig").then(u=>{n(u)})},[s]),r("div",{className:"pl-8 pt-4 bg-white h-full",children:[t.allowedHosts?e("div",{className:`${w["security-form-contain"]}`,children:r(c,{form:a,name:"dynamic_form_item",initialValues:{allowedHosts:t==null?void 0:t.allowedHosts,enableGraphQLEndpoint:t.enableGraphQLEndpoint},labelAlign:"left",labelCol:{xs:{span:4},sm:{span:4}},wrapperCol:{xs:{span:10},sm:{span:9}},children:[r(c.Item,{label:"GraphQL\u7AEF\u70B9\uFF1A",children:[e(c.Item,{name:"enableGraphQLEndpoint",noStyle:!0,required:!0,children:e(M,{disabled:d.devSwitch,className:w["switch-edit-btn"],checked:t.enableGraphQLEndpoint,size:"small",onChange:u=>{i("enableGraphQLEndpoint",u).then(()=>{l(!s)})}})}),r("span",{className:w.setTitle,children:[e(E,{type:"icon-zhuyi",className:"mr-1 text-[14px]"}),e("span",{children:"https://localhost:9991/api/main/graphql"})]})]}),r(c.Item,{label:r("div",{children:[e("span",{children:"\u5141\u8BB8\u4E3B\u673A"}),e(ue,{className:"!left-4",title:e("img",{src:Qe,className:"max-w-60vw max-h-60vh",alt:""})})]}),wrapperCol:{xs:{span:2},sm:{span:20}},children:[e(M,{className:w["switch-edit-btn"],checked:t.allowedHostsEnable,size:"small",onChange:u=>{i("allowedHostsEnable",u).then(()=>{l(!s)})}}),e("span",{className:"ml-4 text-default",children:"\u5141\u8BB8\u5168\u90E8"})]}),!t.allowedHostsEnable&&e(c.Item,{wrapperCol:{offset:4,xs:{span:2},sm:{span:20}},children:e(c.List,{name:"allowedHosts",children:(u,{add:m,remove:k},{errors:N})=>r(L,{children:[u.map((x,v)=>g.exports.createElement(c.Item,{...de,required:!1,key:x.key},e(c.Item,{...x,validateTrigger:["onChange","onBlur"],noStyle:!0,rules:[],children:r("div",{className:"",children:[e("div",{children:"\u57DF\u540D"+(v+1).toString()+":"}),e(P,{addonBefore:"http(s)://",placeholder:"OIDC\u8DF3\u8F6C\u7684\u56DE\u8C03\u5730\u5740",style:{width:"60%"},defaultValue:t.allowedHosts[v],onBlur:h=>{h.target.value!=""&&i("allowedHosts",a.getFieldValue("allowedHosts")).then(()=>{l(!s)})},onPressEnter:h=>{h.target.value!=""&&i("allowedHosts",a.getFieldValue("allowedHosts")).then(()=>{l(!s)})}}),e("span",{className:`${w["form-delete-icon"]}`,onClick:()=>{F.post("/global",{key:"allowedHosts",val:a.getFieldValue("allowedHosts").filter((h,D)=>D!=v)}).then(()=>{k(v)})},children:e("img",{src:"/assets/deleteIcon.svg",alt:" "})})]})}))),r(c.Item,{wrapperCol:{span:20},className:"mt-4",children:[e(ae,{type:"dashed",style:{width:"48%"},onClick:()=>m(),icon:e(le,{}),className:"text-gray-500/60",children:"\u65B0\u589EHOST"}),e(c.ErrorList,{errors:N})]})]})})})]})}):null,e(Ke,{})]})}var Ye=function(a){fe(n,a);var t=ge(n);function n(){var s;return ve(this,n),s=t.apply(this,arguments),s.state={error:void 0,info:{componentStack:""}},s}return Ce(n,[{key:"componentDidCatch",value:function(l,d){this.setState({error:l,info:d})}},{key:"render",value:function(){var l=this.props,d=l.message,i=l.description,u=l.children,m=this.state,k=m.error,N=m.info,x=N&&N.componentStack?N.componentStack:null,v=typeof d>"u"?(k||"").toString():d,h=typeof i>"u"?x:i;return k?e(pe,{type:"error",message:v,description:e("pre",{children:h})}):u}}]),n}(g.exports.Component),Ze=globalThis&&globalThis.__rest||function(a,t){var n={};for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&t.indexOf(s)<0&&(n[s]=a[s]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(a);l<s.length;l++)t.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(a,s[l])&&(n[s[l]]=a[s[l]]);return n},Je={success:Ee,info:we,error:Ne,warning:De},Xe={success:Ie,info:Be,error:ke,warning:Se},et=function(t){var n=t.description,s=t.icon,l=t.prefixCls,d=t.type,i=(n?Xe:Je)[d]||null;return s?Ae(s,e("span",{className:"".concat(l,"-icon"),children:s}),function(){return{className:se("".concat(l,"-icon"),z({},s.props.className,s.props.className))}}):g.exports.createElement(i,{className:"".concat(l,"-icon")})},tt=function(t){var n=t.isClosable,s=t.closeText,l=t.prefixCls,d=t.closeIcon,i=t.handleClose;return n?e("button",{type:"button",onClick:i,className:"".concat(l,"-close-icon"),tabIndex:0,children:s?e("span",{className:"".concat(l,"-close-text"),children:s}):d}):null},me=function(t){var n,s=t.description,l=t.prefixCls,d=t.message,i=t.banner,u=t.className,m=u===void 0?"":u,k=t.style,N=t.onMouseEnter,x=t.onMouseLeave,v=t.onClick,h=t.afterClose,D=t.showIcon,S=t.closable,f=t.closeText,o=t.closeIcon,p=o===void 0?e(ye,{}):o,O=t.action,A=Ze(t,["description","prefixCls","message","banner","className","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","closeIcon","action"]),j=g.exports.useState(!1),Q=be(j,2),K=Q[0],q=Q[1],X=g.exports.useRef(),W=g.exports.useContext(xe),ee=W.getPrefixCls,Y=W.direction,B=ee("alert",l),Z=function(H){var U;q(!0),(U=A.onClose)===null||U===void 0||U.call(A,H)},C=function(){var H=A.type;return H!==void 0?H:i?"warning":"info"},y=f?!0:S,V=C(),R=i&&D===void 0?!0:D,te=se(B,"".concat(B,"-").concat(V),(n={},z(n,"".concat(B,"-with-description"),!!s),z(n,"".concat(B,"-no-icon"),!R),z(n,"".concat(B,"-banner"),!!i),z(n,"".concat(B,"-rtl"),Y==="rtl"),n),m),ne=Oe(A);return e(Fe,{visible:!K,motionName:"".concat(B,"-motion"),motionAppear:!1,motionEnter:!1,onLeaveStart:function(H){return{maxHeight:H.offsetHeight}},onLeaveEnd:h,children:function(_){var H=_.className,U=_.style;return r("div",{ref:X,"data-show":!K,className:se(te,H),style:ie(ie({},k),U),onMouseEnter:N,onMouseLeave:x,onClick:v,role:"alert",...ne,children:[R?e(et,{description:s,icon:A.icon,prefixCls:B,type:V}):null,r("div",{className:"".concat(B,"-content"),children:[d?e("div",{className:"".concat(B,"-message"),children:d}):null,s?e("div",{className:"".concat(B,"-description"),children:s}):null]}),O?e("div",{className:"".concat(B,"-action"),children:O}):null,e(tt,{isClosable:!!y,closeText:f,prefixCls:B,closeIcon:p,handleClose:Z})]})}})};me.ErrorBoundary=Ye;const pe=me;G.extend(Le);function nt(){const[a,t]=b(!1),[n,s]=b(!1),[l,d]=b(!1),[i,u]=b(!1);b(!1);const[m,k]=b({}),[N,x]=b(0),[v,h]=g.exports.useState();g.exports.useEffect(()=>{F.get("/setting/systemConfig").then(o=>{k(o)})},[v]),g.exports.useEffect(()=>{F.get("/setting/getTime").then(o=>{const p=Date.parse(o);x(p)}).then(()=>{h(!v)})},[]),g.exports.useEffect(()=>{const o=setInterval(()=>x(p=>p+1),1e3);return()=>{clearInterval(o)}},[]);const D=(o,p)=>{F.post("/setting",{key:p,val:o.target.value}).then(()=>{h(!v)})},S=o=>{const p=G.duration(G().diff(G(o),"seconds"),"seconds");return`${p.$d.days}\u5929 ${p.$d.hours}\u65F6 ${p.$d.minutes}\u5206 ${p.$d.seconds}\u79D2`},f=(o,p)=>{p==""&&!["apiHost","oidcHost"].includes(o)||F.post("/setting",{key:o,val:p}).then(()=>{h(!v)})};return e(L,{children:m.apiPort?r("div",{className:"pt-8 pl-8",children:[r(I,{colon:!1,column:1,className:w["descriptions-box"],labelStyle:{width:"15%"},children:[e(I.Item,{label:"\u8FD0\u884C\u65F6\u957F:",children:S(G(N).format("YYYY-MM-DD HH:mm:ss"))}),r(I.Item,{label:"\u8BA4\u8BC1\u5668\u57DF\u540D:",className:"w-20",children:[l?e(P,{defaultValue:m.oidcHost,autoFocus:!0,style:{width:"300px",height:"24px",paddingLeft:"6px"},type:"text",onBlur:o=>{d(!l),f("oidcHost",o.target.value)},onPressEnter:o=>{d(!l),f("oidcHost",o.currentTarget.value)}}):e("span",{children:m.oidcHost}),e(E,{type:"icon-bianji",className:"ml-2",onClick:()=>{d(!l)}})]}),r(I.Item,{label:"\u8BA4\u8BC1\u5668\u7AEF\u53E3:",className:"w-20",children:[i?e(P,{defaultValue:m.oidcPort,autoFocus:!0,style:{width:"300px",height:"24px",paddingLeft:"6px"},type:"text",onBlur:o=>{u(!i),f("oidcPort",o.target.value)},onPressEnter:o=>{u(!i),f("oidcPort",o.currentTarget.value)}}):e("span",{children:m.oidcPort}),e(E,{type:"icon-bianji",className:"ml-2",onClick:()=>{u(!i)}})]}),r(I.Item,{label:"API\u57DF\u540D:",className:"w-20",children:[a?e(P,{defaultValue:m.apiHost,autoFocus:!0,style:{width:"300px",height:"24px",paddingLeft:"6px"},type:"text",onBlur:o=>{t(!a),f("apiHost",o.target.value)},onPressEnter:o=>{t(!a),f("apiHost",o.currentTarget.value)}}):e("span",{children:m.apiHost}),e(E,{type:"icon-bianji",className:"ml-2",onClick:()=>{t(!a)}})]}),r(I.Item,{label:"API\u7AEF\u53E3:",className:"w-20",children:[n?e(P,{defaultValue:m.apiPort,autoFocus:!0,style:{width:"300px",height:"24px",paddingLeft:"6px"},type:"text",onBlur:o=>{s(!n),f("apiPort",o.target.value)},onPressEnter:o=>{s(!n),f("apiPort",o.currentTarget.value)}}):e("span",{children:m.apiPort}),e(E,{type:"icon-bianji",className:"ml-2",onClick:()=>{s(!n)}})]}),e(I.Item,{label:"\u65E5\u5FD7\u6C34\u5E73:",children:r($.Group,{value:m.logLevel,onChange:o=>{D(o,"logLevel")},children:[e($,{value:1,className:"mr-15 ",children:"info"}),e($,{value:2,className:"mr-15",children:"debug"}),e($,{value:3,children:" error "})]})}),e(I.Item,{label:"\u5F00\u53D1\u73AF\u5883",children:r($.Group,{value:m.devSwitch,onChange:o=>{o.target.value&&F.post("/global",{key:"enableGraphQLEndpoint",val:!0}),D(o,"devSwitch")},children:[e($,{value:!0,className:"mr-15",children:"\u5F00\u53D1\u73AF\u5883"}),e($,{value:!1,children:"\u751F\u4EA7\u73AF\u5883"})]})}),e(I.Item,{label:"\u8C03\u8BD5:",children:e(M,{onChange:o=>{F.post("/setting",{key:"debugSwitch",val:o}).then(()=>{h(!v)})},defaultChecked:m.debugSwitch,className:w["switch-edit-btn"],size:"small"})}),m.devSwitch?null:e(I.Item,{label:"\u5F3A\u5236\u8DF3\u8F6C:",children:e(M,{checked:m.forcedJumpSwitch,className:w["switch-edit-btn"],size:"small",onChange:o=>{F.post("/setting",{key:"forcedJumpSwitch",val:o}).then(()=>{h(!v)})}})})]}),e("div",{className:"w-2/3",children:e(pe,{message:"\u4FEE\u6539\u8BBE\u7F6E\u540E\uFF0C\u8BF7\u91CD\u65B0\u7F16\u8BD1",type:"warning",showIcon:!0})})]}):null})}function st(){const[a,t]=b({});return g.exports.useEffect(()=>{async function n(){const s=await F.get("/setting/versionConfig");t(s)}n()},[]),e(L,{children:e("div",{className:"pl-8 pt-6 bg-white h-full",children:r(I,{column:1,size:"small",className:w["descriptions-box"],labelStyle:{width:"15%"},children:[e(I.Item,{label:"\u7248\u672C",children:r("div",{className:"flex items-center",children:[a.versionNum?e("div",{children:a.versionNum}):e("div",{className:"w-50px h-22px",children:" "}),e("div",{className:w["check-info"],children:"\u67E5\u770B\u66F4\u65B0\u65E5\u5FD7"})]})}),e(I.Item,{label:"prisma\u7248\u672C",children:a.prismaVersion}),e(I.Item,{label:"prisma\u5F15\u64CE\u7248\u672C",children:a.prismaEngineVersion}),e(I.Item,{label:"\u7248\u6743",children:a.copyright})]})})})}function at({showType:a}){const[t,n]=b(""),[s,l]=b("");return g.exports.useEffect(()=>{switch(a){case"colorTheme":l("\u5916\u89C2"),n(e(je,{}));break;case"system":l("\u7CFB\u7EDF"),n(e(nt,{}));break;case"secure":l("\u5B89\u5168"),n(e(We,{}));break;case"cors":l("\u8DE8\u57DF"),n(e(ze,{}));break;case"path":l("\u73AF\u5883\u53D8\u91CF"),n(e(Ge,{}));break;case"version":l("\u7248\u672C"),n(e(st,{}));break;default:n(e("div",{children:"error"}));break}},[a]),e(L,{children:t})}function lt({handleToggleDesigner:a,settingType:t,active:n}){return r("div",{className:Ve("flex pl-4 h-9 items-center mb-1 cursor-pointer",{"bg-[rgba(95,98,105,0.1)] rounded-4px":n}),onClick:()=>{a(t)},children:[e("div",{className:"mr-4 text-[16px]",children:t.icon}),e("div",{className:w["item-label"],children:t.name})]})}const ce=[{name:"\u5916\u89C2",type:"colorTheme",icon:e(E,{type:"icon-waiguan"})},{name:"\u7CFB\u7EDF",type:"system",icon:e(E,{type:"icon-xitong"})},{name:"\u5B89\u5168",type:"secure",icon:e(E,{type:"icon-anquan"})},{name:"\u8DE8\u57DF",type:"cors",icon:e(E,{type:"icon-kuayu"})},{name:"\u73AF\u5883\u53D8\u91CF",type:"path",icon:e(E,{type:"icon-huanjingbianliang"})},{name:"\u7248\u672C",type:"version",icon:e(E,{type:"icon-banben"})}];function it({handleToggleDesigner:a,showType:t}){return g.exports.useEffect(()=>{a(ce[0])},[]),e("div",{className:"bg-[#f8f8f8] h-full pt-5.5 px-4",children:ce.map(n=>e(lt,{active:t===n.type,handleToggleDesigner:a,settingType:n},n.type))})}function on(){const{setFullscreen:a}=g.exports.useContext(He),[t,n]=b("data");g.exports.useEffect(()=>{a(!0)},[]);function s(l){n(l.type)}return r("div",{className:"flex flex-col h-full",children:[r("div",{className:"flex-0 h-56px bg-white flex items-center pl-8",style:{border:"1px solid rgba(95,98,105,0.1)"},children:[e("img",{alt:"\u8BBE\u7F6E",src:"/assets/workbench/header-setting.png",className:"w-4 h-4 mr-2"}),e("span",{className:"text-default font-medium",children:"\u8BBE\u7F6E"})]}),r("div",{className:"flex flex-1 min-h-0",children:[e(oe,{className:"w-188px flex-0",children:e(it,{showType:t,handleToggleDesigner:s})}),e(oe,{className:"flex-1 min-w-0 h-full overflow-y-auto bg-white",children:e(at,{showType:t})})]})]})}export{on as default};
