import{r as u,n as d,j as a,F as o,a as s,a9 as b,aa as N}from"./index.64257940.js";import{B as y}from"./button.ca276c4e.js";import"./iconUtil.71342ca5.js";import{S as C}from"./index.21d0aee3.js";import{I as g}from"./index.2b25ba57.js";function A(){const[r,h]=u.exports.useState(),[t,m]=u.exports.useState(),[c,p]=u.exports.useState([]),[x,F]=u.exports.useState(!0),E=e=>{m(e)},v=u.exports.useMemo(()=>{const e=r==null?void 0:r.find(i=>i.value===t);return e==null?void 0:e.label},[r,t]);u.exports.useEffect(()=>{d("/oauth/dblist").then(e=>{var l;const i=e.dbs.map(n=>({label:n.name,value:n.id.toString()}));h(i),m((l=i.at(0))==null?void 0:l.value)})},[]),u.exports.useEffect(()=>{!t||d(`/oauth/tables/${t!=null?t:""}`).then(e=>{const i=e.exist.map(n=>({name:n,isOk:!0})),l=e.notExist.map(n=>({name:n,isOk:!1}));F(l.length===0),p(i.concat(l))})},[t]);function f(){b.post(`/oauth/tables/${t!=null?t:""}/import`).then(()=>N.success("\u5BFC\u5165\u6210\u529F!"))}return a(o,{children:[a("div",{className:"flex items-center my-6",children:[s("div",{className:"text-base mr-4",children:"\u6570\u636E\u5E93"}),s(C,{size:"middle",value:t!=null?t:"",style:{width:270},onChange:E,options:r}),a("div",{className:"ml-6 text-[#00000040]",children:[s(g,{type:"icon-zhuyi",style:{fontSize:"14px",color:"#00000040"}}),s("span",{className:"ml-2",children:"\u914D\u7F6E\u6570\u636E\u5E93\u4E14\u5BFC\u5165\u8868\u7ED3\u6784\u540E\uFF0C\u8BE5\u6A21\u5757\u65B9\u53EF\u6B63\u5E38\u4F7F\u7528"})]})]}),s("div",{className:"px-6 py-4 text-base rounded bg-[#E0202017] text-[#000000D9]",style:{border:"1px solid #E02020"},children:x?a(o,{children:[s("a",{download:"\u9884\u7F6E",href:`/api/v1/oauth/tables/${t!=null?t:""}/export`,children:"\u4E0B\u8F7D"})," ","\u9884\u7F6E\u8868\u7ED3\u6784\uFF0C\u624B\u5DE5\u5BFC\u5165"]}):a(o,{children:["\u6240\u9009\u6570\u636E\u5E93\u6682\u65E0\u9884\u5236\u8868\u7ED3\u6784\uFF0C\u662F\u5426\u5BFC\u5165\uFF1F",s(y,{type:"primary",onClick:f,children:"\u5BFC\u5165"})]})}),a("div",{className:"mt-7 ",children:[a("div",{className:"px-8 py-3 text-base text-[#787D8B]",children:[s("span",{children:"\u6570\u636E\u5E93\uFF1A"}),s("span",{children:v})]}),s("div",{style:{border:"1px solid rgba(95,98,105,0.1)"}}),a("div",{className:"flex items-center",children:[s("div",{children:c.filter(e=>e.isOk===!0).map(e=>a("div",{className:"flex items-center mt-3 mx-8 my-1.5 text-base",children:[s("div",{className:"mr-4",children:"\u2705"}),s("div",{className:"text-base text-[#000000D9]",children:e.name})]},e.name))}),s("div",{children:c.filter(e=>e.isOk===!1).map(e=>a("div",{className:"flex items-center mt-3 mx-8 my-1.5 text-base",children:[s("div",{className:"mr-4",children:"\u274E"}),s("div",{className:"text-base text-[#000000D9]",children:e.name})]},e.name))})]})]})]})}export{A};
