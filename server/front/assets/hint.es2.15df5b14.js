import{C as f}from"./codemirror.es.f9aaa881.js";import{f as j}from"./forEachState.es.d8431927.js";import"./index.3992c1fc.js";import"./index.64257940.js";import{u as g,Q as b,L as O,M as y,v as N,s as D}from"./index.bf34cfca.js";import"./index.5b2f5049.js";import"./Dropdown.66094b27.js";import"./index.61964446.js";import"./Portal.bf2e5144.js";import"./type.4482a080.js";import"./Overflow.ff04d686.js";import"./statusUtils.e7207d24.js";import"./context.4fcda71f.js";import"./_baseIsEqual.ae1f3f6e.js";import"./omit.173224d8.js";import"./PlusOutlined.3088ee84.js";import"./Tree.0082570b.js";import"./isSymbol.d728fe31.js";import"./index.39cec35d.js";import"./pickAttrs.91b30b21.js";import"./conductUtil.91a30912.js";import"./iconUtil.71342ca5.js";import"./SearchOutlined.d2d234c2.js";import"./button.ca276c4e.js";import"./Helmet.90e2ca49.js";import"./index.d4e5ccca.js";import"./isArrayLikeObject.9676d780.js";import"./get.ab779695.js";import"./identity.af5bbf98.js";import"./_copyArray.ed92a2fd.js";import"./index.9d56ca15.js";import"./row.04cc9265.js";import"./styleChecker.9486324a.js";import"./responsiveObserve.a761adf9.js";import"./index.27788710.js";import"./parser.542c3b4e.js";import"./index.4ef503cf.js";import"./workbenchContext.4d536977.js";import"./index.e3184aa5.js";import"./index.21d0aee3.js";import"./utils.435ff07e.js";import"./DialogWrap.ed68ac9f.js";import"./index.e073bbb6.js";import"./path.02380b0b.js";import"./Editor.88c5e82e.js";import"./use-immer.module.72e4ecef.js";import"./index.70ebfd77.js";import"./stackblitz.d6583d31.js";import"./index.46a9404e.js";import"./dayjs.min.9104a23a.js";import"./DoubleRightOutlined.d12d812f.js";import"./index.93b57069.js";import"./EyeOutlined.8d71b64e.js";import"./index.e257c064.js";import"./RightOutlined.ce6e99f7.js";import"./Sider.4bd14ece.js";import"./index.114f7a19.js";import"./main.6509447f.js";import"./index.e939beeb.js";import"./index.c6a78d56.js";import"./index.5c556af0.js";import"./utils.02fb0c25.js";import"./DeleteOutlined.ab1eeec0.js";import"./index.22218f67.js";import"./main.5d92847d.js";var M=Object.defineProperty,a=(o,i)=>M(o,"name",{value:i,configurable:!0});function c(o,i,e){const r=x(e,d(i.string));if(!r)return;const t=i.type!==null&&/"|\w/.test(i.string[0])?i.start:i.end;return{list:r,from:{line:o.line,ch:t},to:{line:o.line,ch:i.end}}}a(c,"hintList");function x(o,i){if(!i)return u(o,n=>!n.isDeprecated);const e=o.map(n=>({proximity:T(d(n.text),i),entry:n}));return u(u(e,n=>n.proximity<=2),n=>!n.entry.isDeprecated).sort((n,p)=>(n.entry.isDeprecated?1:0)-(p.entry.isDeprecated?1:0)||n.proximity-p.proximity||n.entry.text.length-p.entry.text.length).map(n=>n.entry)}a(x,"filterAndSortList");function u(o,i){const e=o.filter(i);return e.length===0?o:e}a(u,"filterNonEmpty");function d(o){return o.toLowerCase().replace(/\W/g,"")}a(d,"normalizeText");function T(o,i){let e=v(i,o);return o.length>i.length&&(e-=o.length-i.length-1,e+=o.indexOf(i)===0?0:.5),e}a(T,"getProximity");function v(o,i){let e,r;const t=[],n=o.length,p=i.length;for(e=0;e<=n;e++)t[e]=[e];for(r=1;r<=p;r++)t[0][r]=r;for(e=1;e<=n;e++)for(r=1;r<=p;r++){const s=o[e-1]===i[r-1]?0:1;t[e][r]=Math.min(t[e-1][r]+1,t[e][r-1]+1,t[e-1][r-1]+s),e>1&&r>1&&o[e-1]===i[r-2]&&o[e-2]===i[r-1]&&(t[e][r]=Math.min(t[e][r],t[e-2][r-2]+s))}return t[n][p]}a(v,"lexicalDistance");f.registerHelper("hint","graphql-variables",(o,i)=>{const e=o.getCursor(),r=o.getTokenAt(e),t=L(e,r,i);return(t==null?void 0:t.list)&&t.list.length>0&&(t.from=f.Pos(t.from.line,t.from.ch),t.to=f.Pos(t.to.line,t.to.ch),f.signal(o,"hasCompletion",o,t,r)),t});function L(o,i,e){const r=i.state.kind==="Invalid"?i.state.prevState:i.state,t=r.kind,n=r.step;if(t==="Document"&&n===0)return c(o,i,[{text:"{"}]);const p=e.variableToType;if(!p)return;const s=V(p,i.state);if(t==="Document"||t==="Variable"&&n===0){const l=Object.keys(p);return c(o,i,l.map(m=>({text:`"${m}": `,type:p[m]})))}if((t==="ObjectValue"||t==="ObjectField"&&n===0)&&s.fields){const l=Object.keys(s.fields).map(m=>s.fields[m]);return c(o,i,l.map(m=>({text:`"${m.name}": `,type:m.type,description:m.description})))}if(t==="StringValue"||t==="NumberValue"||t==="BooleanValue"||t==="NullValue"||t==="ListValue"&&n===1||t==="ObjectField"&&n===2||t==="Variable"&&n===2){const l=s.type?g(s.type):void 0;if(l instanceof b)return c(o,i,[{text:"{"}]);if(l instanceof O){const m=l.getValues();return c(o,i,m.map(h=>({text:`"${h.name}"`,type:l,description:h.description})))}else if(l===y)return c(o,i,[{text:"true",type:y,description:"Not false."},{text:"false",type:y,description:"Not true."}])}}a(L,"getVariablesHint");function V(o,i){const e={type:null,fields:null};return j(i,r=>{if(r.kind==="Variable")e.type=o[r.name];else if(r.kind==="ListValue"){const t=e.type?N(e.type):void 0;e.type=t instanceof D?t.ofType:null}else if(r.kind==="ObjectValue"){const t=e.type?g(e.type):void 0;e.fields=t instanceof b?t.getFields():null}else if(r.kind==="ObjectField"){const t=r.name&&e.fields?e.fields[r.name]:null;e.type=t==null?void 0:t.type}}),e}a(V,"getTypeInfo");
